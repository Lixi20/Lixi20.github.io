<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="李喜">
<title>C03课堂随笔</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: rgba(0, 0, 0, 0.8); padding: 0; margin: 0; font-family: "Noto Serif", "DejaVu Serif", serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #7a2518; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2156a5; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #1d4b8f; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Open Sans", "DejaVu Sans", sans-serif; font-weight: 300; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: rgba(0, 0, 0, 0.8); border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

body { tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }
h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong { font-weight: 400; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; border: 1px dashed #2f6fab;}

pre {border: 1px dashed gray;}

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; text-rendering: optimizeSpeed;}

.keyseq { color: rgba(51, 51, 51, 0.8); }

kbd { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; display: inline-block; color: rgba(0, 0, 0, 0.8); font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: rgba(0, 0, 0, 0.8); }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Open Sans", "DejaVu Sans", sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #7a2518; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f8f8f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: rgba(0, 0, 0, 0.8); padding: 1.25em; }

#footer-text { color: rgba(255, 255, 255, 0.8); line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Noto Serif", "DejaVu Serif", serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Open Sans", "DejaVu Sans", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.listingblock pre:not(.highlight) {color: white; background: #002b36; }

.literalblock pre, .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f7f7f8; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #f7f7f8; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock pre.prettyprint { border-width: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #7a2518; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: rgba(0, 0, 0, 0.8); font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #19407c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: rgba(0, 0, 0, 0.8); -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

dt, th.tableblock, td.content, div.footnote { text-rendering: optimizeLegibility; }

h1, h2, p, td.content, span.alt { letter-spacing: -0.01em; }

p strong, td.content strong, div.footnote strong { letter-spacing: -0.005em; }

p, blockquote, dt, td.content, span.alt { font-size: 1.0625rem; }

p { margin-bottom: 1.25rem; }

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock { font-size: 1em; }

.exampleblock > .content { background-color: #fffef7; border-color: #e0e0dc; -webkit-box-shadow: 0 1px 4px #e0e0dc; box-shadow: 0 1px 4px #e0e0dc; }

.print-only { display: none !important; }

@media print { @page { margin: 1.25cm 0.75cm; }
  * { -webkit-box-shadow: none !important; box-shadow: none !important; text-shadow: none !important; }
  a { color: inherit !important; text-decoration: underline !important; }
  a.bare, a[href^="#"], a[href^="mailto:"] { text-decoration: none !important; }
  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after { content: "(" attr(href) ")"; display: inline-block; font-size: 0.875em; padding-left: 0.25em; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  pre, blockquote, tr, img, object, svg { page-break-inside: avoid; }
  thead { display: table-header-group; }
  svg { max-width: 100%; }
  p, blockquote, dt, td.content { font-size: 1em; orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  #toc, .sidebarblock, .exampleblock > .content { background: none !important; }
  #toc { border-bottom: 1px solid #ddddd8 !important; padding-bottom: 0 !important; }
  .sect1 { padding-bottom: 0 !important; }
  .sect1 + .sect1 { border: 0 !important; }
  #header > h1:first-child { margin-top: 1.25rem; }
  body.book #header { text-align: center; }
  body.book #header > h1:first-child { border: 0 !important; margin: 2.5em 0 1em 0; }
  body.book #header .details { border: 0 !important; display: block; padding: 0 !important; }
  body.book #header .details span:first-child { margin-left: 0 !important; }
  body.book #header .details br { display: block; }
  body.book #header .details br + span:before { content: none !important; }
  body.book #toc { border: 0 !important; text-align: left !important; padding: 0 !important; margin: 0 !important; }
  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 { page-break-before: always; }
  .listingblock code[data-lang]:before { display: block; }
  #footer { background: none !important; padding: 0 0.9375em; }
  #footer-text { color: rgba(0, 0, 0, 0.6) !important; font-size: 0.9em; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }

</style>
<link rel="stylesheet" href="css/font-awesome.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>C03课堂随笔</h1>
<div class="details">
<span id="author" class="author">李喜</span><br>
<span id="email" class="email"><a href="mailto:lixi0506cd@gmail.com">lixi0506cd@gmail.com</a></span><br>
<span id="revdate">何文松 &lt;conscience0915@gmail.com&gt;</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_前言">前言</a>
<ul class="sectlevel2">
<li><a href="#_贡献名单">贡献名单</a></li>
</ul>
</li>
<li><a href="#_BCTS1_chapter">1. 编程通识(一)</a>
<ul class="sectlevel2">
<li><a href="#_板书">1.1. 板书</a></li>
<li><a href="#_三个公式">1.2. 三个公式</a></li>
<li><a href="#_产品软件商业模式">1.3. 产品=软件+商业模式</a>
<ul class="sectlevel3">
<li><a href="#_软件是什么">1.3.1. 软件是什么？</a></li>
<li><a href="#_商业模式是什么">1.3.2. 商业模式是什么？</a></li>
</ul>
</li>
<li><a href="#_软件程序使用场景">1.4. 软件=程序+使用场景</a>
<ul class="sectlevel3">
<li><a href="#_程序">1.4.1. 程序</a></li>
<li><a href="#_使用场景">1.4.2. 使用场景</a></li>
</ul>
</li>
<li><a href="#_程序算法数据结构">1.5. 程序=算法+数据结构</a>
<ul class="sectlevel3">
<li><a href="#_程序是什么">1.5.1. 程序是什么</a></li>
<li><a href="#_算法是什么">1.5.2. 算法是什么</a></li>
<li><a href="#_数据结构是什么">1.5.3. 数据结构是什么</a></li>
</ul>
</li>
<li><a href="#_编程要培养编程直觉">1.6. 编程要培养编程直觉</a></li>
</ul>
</li>
<li><a href="#_BCTS2_chapter">2. 编程通识(二)</a>
<ul class="sectlevel2">
<li><a href="#_板书_2">2.1. 板书</a></li>
<li><a href="#_前言_2">2.2. 前言</a></li>
<li><a href="#_什么是网络">2.3. 什么是网络</a>
<ul class="sectlevel3">
<li><a href="#_互联网与万维网">2.3.1. 互联网与万维网</a></li>
</ul>
</li>
<li><a href="#_补充学习编程到底在学习什么">2.4. 补充：学习编程到底在学习什么？</a>
<ul class="sectlevel3">
<li><a href="#_数学">2.4.1. 数学</a></li>
<li><a href="#_编程">2.4.2. 编程</a></li>
</ul>
</li>
<li><a href="#_什么是协议">2.5. 什么是协议</a>
<ul class="sectlevel3">
<li><a href="#_举个例子">2.5.1. 举个例子</a></li>
</ul>
</li>
<li><a href="#_什么是网络协议">2.6. 什么是网络协议</a>
<ul class="sectlevel3">
<li><a href="#_协议">2.6.1. 协议：</a></li>
<li><a href="#_tcp子集_httpftpudptcpsmtppop3imap">2.6.2. TCP子集 （HTTP、FTP、UDP、TCP、SMTP、POP3、IMAP）</a>
<ul class="sectlevel4">
<li><a href="#_pop3_smtp_imap的区别在哪里">POP3, SMTP, IMAP的区别在哪里？</a></li>
</ul>
</li>
<li><a href="#_ip子集icmparp">2.6.3. IP子集(ICMP\ARP)</a></li>
<li><a href="#_要理解计算机世界是怎么运行的非常重要">2.6.4. 要理解计算机世界是怎么运行的非常重要！！！</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_XMSZ1_chapter">3. 项目实战(一)</a>
<ul class="sectlevel2">
<li><a href="#_板书_3">3.1. 板书</a></li>
<li><a href="#_前言_3">3.2. 前言</a></li>
<li><a href="#_项目背景">3.3. 项目背景</a>
<ul class="sectlevel3">
<li><a href="#_常用监控软件">3.3.1. 常用监控软件</a></li>
<li><a href="#_它们存在的问题">3.3.2. 它们存在的问题</a></li>
<li><a href="#_项目背景_2">3.3.3. 项目背景</a></li>
<li><a href="#_还有哪些领域在用linux">3.3.4. 还有哪些领域在用Linux？</a></li>
<li><a href="#_什么叫头部">3.3.5. 什么叫头部？</a></li>
<li><a href="#_linux存在的问题">3.3.6. Linux存在的问题</a></li>
<li><a href="#_起步阶段">3.3.7. 起步阶段</a></li>
<li><a href="#_补充为什么程序员的工资比传统行业高">3.3.8. 补充：为什么程序员的工资比传统行业高</a></li>
<li><a href="#_起步阶段的会遇见的问题">3.3.9. 起步阶段的会遇见的问题</a></li>
<li><a href="#_项目后期会遇见的问题">3.3.10. 项目后期会遇见的问题</a></li>
</ul>
</li>
<li><a href="#_提出问题技术">3.4. 提出问题(技术)</a>
<ul class="sectlevel3">
<li><a href="#_怎样了解模块间的调用关系">3.4.1. 怎样了解模块间的调用关系？</a></li>
<li><a href="#_模块内的工作状态是怎样的">3.4.2. 模块内的工作状态是怎样的？</a></li>
</ul>
</li>
<li><a href="#_解决问题设计">3.5. 解决问题(设计)</a>
<ul class="sectlevel3">
<li><a href="#_管控模块间的交互">3.5.1. 管控模块间的交互</a></li>
<li><a href="#_模块内的工作时长输入参数输出结果数量等等">3.5.2. 模块内的工作时长（输入参数，输出结果数量等等）</a></li>
</ul>
</li>
<li><a href="#_整体数据逻辑设计">3.6. 整体数据逻辑设计</a>
<ul class="sectlevel3">
<li><a href="#_架构图">3.6.1. 架构图</a></li>
<li><a href="#_怎样收集数据应该收集哪些数据">3.6.2. 怎样收集数据？应该收集哪些数据？</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_XMSZ2_chapter">4. 项目实战(二)</a>
<ul class="sectlevel2">
<li><a href="#_板书_4">4.1. 板书</a></li>
<li><a href="#_前言_4">4.2. 前言</a></li>
<li><a href="#_客户端的问题">4.3. 客户端的问题</a></li>
<li><a href="#_扩展性">4.4. 扩展性</a></li>
<li><a href="#_主程序怎么运行的">4.5. 主程序怎么运行的？</a></li>
<li><a href="#_扩充">4.6. 扩充</a></li>
<li><a href="#_新的问题">4.7. 新的问题</a></li>
</ul>
</li>
<li><a href="#_HTTP_chapter">5. HTTP协议</a>
<ul class="sectlevel2">
<li><a href="#_板书_5">5.1. 板书</a></li>
<li><a href="#_什么是http">5.2. 什么是HTTP？</a>
<ul class="sectlevel3">
<li><a href="#_协议_2">5.2.1. 协议</a></li>
<li><a href="#_文本">5.2.2. 文本</a></li>
</ul>
</li>
<li><a href="#_为什么用http">5.3. 为什么用HTTP？</a></li>
<li><a href="#_怎么使用http">5.4. 怎么使用HTTP？</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_前言">前言</h2>
<div class="sectionbody">
<div class="paragraph">
<p>一本关于软件开发、应用前端、系统运维、产品运营、思维、思考的全能手册。</p>
</div>
<div class="sect2">
<h3 id="_贡献名单">贡献名单</h3>
<div class="paragraph">
<p><strong>不按时间先后</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>李喜</p>
</li>
<li>
<p>何文松</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_BCTS1_chapter">1. 编程通识(一)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_板书">1.1. 板书</h3>
<div class="imageblock">
<div class="content">
<img src="images/1.1编程通识(一)板书.jpg" alt="1.1编程通识(一)板书">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_三个公式">1.2. 三个公式</h3>
<div class="paragraph">
<p>程序一般有很多种理解，比如我们在Linux命令行里经常输入的命令,它其实就是一个程序，再比如我们常用的微信，它也是一个程序,那么程序到底指的是什么？
讲程序之前我们先了解3个公式：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>产品=软件+商务模式

软件=程序+使用场景

程序=算法＋数据结构</pre>
</div>
</div>
<div class="paragraph">
<p>很明显它们 <code>相互关联</code> ，可以说它们能够构成一个 <code>链</code> ，从左到右，逐渐的就开始无限扩大，我们也会发现越到后面越虚，为了更好的理解，从上往下我们一步一步的来</p>
</div>
</div>
<div class="sect2">
<h3 id="_产品软件商业模式">1.3. 产品=软件+商业模式</h3>
<div class="paragraph">
<p>将日常中使用的微信带入到这个公式中，然后 <code>产品=软件+商务模式</code> 将微信带入这个公式就变为了：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>微信 = 微信 + 商业模式</pre>
</div>
</div>
<div class="paragraph">
<p>这个公式成立吗?</p>
</div>
<div class="paragraph">
<p>很虚，说不通，所以换一种说法，那这个公式正确写法应该是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>产品 (微信) = 程序(微信) + 商业模式(微信)</pre>
</div>
</div>
<div class="sect3">
<h4 id="_软件是什么">1.3.1. 软件是什么？</h4>
<div class="paragraph">
<p>简单来说软件就代表的是这个产品的App</p>
</div>
</div>
<div class="sect3">
<h4 id="_商业模式是什么">1.3.2. 商业模式是什么？</h4>
<div class="paragraph">
<p>我们先举个例子来说明微信的上商业模式是怎样的，这样就能理解商业模式指的是什么概念。</p>
</div>
<hr>
<div class="paragraph">
<p>在智能手机普及之前，不管动感地带、电信、联通等等运营商，购买了它们的包月套餐，假如当时你在谈恋爱，那个套餐里的短信数量，一个月肯定是不够用的，然后就会想方设法的去免费的发消息，但有个问题，当时并不是所有的手机都是智能机，那么在那个时代充斥着一堆诺基亚或者是一堆老年机的时代里，是没有任何好用并且免费的沟通工具。</p>
</div>
<hr>
<div class="paragraph">
<p>那么在智能手机开始普及后的初期，当时安卓和IOS这两个平台上都没有一个好用的、免费的沟通工具。QQ当时出现了，当时QQ的重心并不是移动端，不过当时QQ也适配了移动端(3G QQ)，可是进去过后各种东西，普通人根本不适用，更适用于懂网络的人，微信和QQ的注册方式也不同，微信只需要用手机号发送一个短信就能注册账号了，这样就更适用于普通用户，而QQ则需要登录网页，可能还要申请邮箱而且有很繁琐的步骤，那么微信的商业模式也可以说解决的问题就是普罗大众利用移动的智能手机，免费的相互发送消息。</p>
</div>
<hr>
<div class="paragraph">
<p>为什么特别强调免费呢，因为在这个之前，有一个叫飞书的那个软件，一天有十条的免费短信，飞书这个软件其实也解决了问题。他就像发短信一样的操作，但是超过十条要另外收费。最开始是不收费的，但后面变成了收费，所以自从他想收费的那一天开始，他就已经和成功远离了。
而这类软件的盈利点是随着你的用户量越多，从而产生其他的盈利点，而不是在发消息本身。假设现在的微信发十条消息过后要收钱一分钱一条，那他就和以前搞那个超级女声投票一样，每投一次一块钱一条没有本质的区别。
那现在微信可不是这么玩了，微信说你要开发小程序，对不起，你要交钱，你的服务器要在我这，然后我还要流量提成，你要和我合作，所以收费的渠道很多，盈利点都是在后期。</p>
</div>
<div class="paragraph">
<p>从上面这个例子来看，微信这个产品就等于微信这个App加上他商业模式，而他的 <code>商业模式</code> 就是免费的移动端，消息互发，交友，解决了移动端通信打电话要钱、发短信要钱的问题，你只需要装个App就可以了。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_软件程序使用场景">1.4. 软件=程序+使用场景</h3>
<div class="sect3">
<h4 id="_程序">1.4.1. 程序</h4>
<div class="paragraph">
<p>我们顺着上面的微信来讲，之前讲的软件指的就是App，但是它的定义很笼统，它包含了 <code>所有平台</code> 的App，如： <code>安卓</code> ， <code>IOS</code> ， <code>PC</code> 等等 ,在软件这个公式里，App就具体指的众多平台中其中一个，就比如说安卓的App、IOS的App等等。</p>
</div>
</div>
<div class="sect3">
<h4 id="_使用场景">1.4.2. 使用场景</h4>
<div class="paragraph">
<p>刚刚商业模式指的是发送消息这种很笼统的概念，而使用场景是说
<code>你拿出了手机，打开了安卓的App，然后在输入框里面打字</code>
相比于商业模式分化的更加细致。</p>
</div>
<div class="paragraph">
<p>举一些例子</p>
</div>
<hr>
<div class="paragraph">
<p>以前的甲骨文，可以用来传递的消息。甚至甲骨文之前你还可以用藤条打几个结记事情，还有就是图像，比如像型文字，甲骨文那种像型文字都是为了传递信息。那么在文字出现之前呢？像型文字出现之前，可以用声音，在一万年前通信基本靠吼，一个人站在那个山头，另一个人站在这个山头，我们俩就对吼，这也是传递消息的一种方式。</p>
</div>
<hr>
<div class="paragraph">
<p>那在指环王里，刚铎被围攻，甘道夫就对洛翰国的国王说你应该去帮助刚铎，然后国王说“刚铎国王都没有点起烽火，我去干嘛？这样我很没面子。”，不过之后就有一个夏尔人爬到那个烽火上面，故意把油打倒然后点燃了烽火。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>烽火是啥？
烽火，又称烽燧、狼烟、狼燧，是一种用于示警的讯号，通常会在险要处或交通要道上建筑用于传递这种讯号的高台，后方看见讯号便知有战事发生，出兵相助。</pre>
</div>
</div>
<div class="paragraph">
<p>那么这个烽火就是在传递消息，所以视觉也可以传递消息，但是这种传递消息是属于双方提前约好的，就比如说两个人，并没有提前交代生火的意思，对于他们来说，就只是单纯地认为着火了，但是当他们提前告知对方生火所蕴含的意义时，就会认为，一方按规矩生火了，那另一方也要生火，按规则运行，那么他们就是在有效的传递消息。</p>
</div>
<hr>
<div class="paragraph">
<p>再比如说，在大街上看到消防车后，我们就知道肯定某个地方着火了，不过这个消息是没有意义的，因为你并不知道是哪个地方着火了，着火的是不是你家？你需不去救火？但消防员知道，他知道XXX小区X楼着火了，可能因为是烤腊肉或者电灯毯着火的，所以消防员的目的，就是我知道着火了，我要去救火，对于他来说，着火了，他的使命就是救火，而对于我们来说，可能是手足无措看热闹，看热闹的时候你挤进去了，那么你就知道到底发生什么事了。</p>
</div>
<hr>
<div class="paragraph">
<p>综上所述，视觉可以传递消息，通信靠吼也可以传递消息，文字也可以传递信息，手打出的文字，画的画都可以传递消息。
那么使用场景，如果从微信上来说的话，就应该是打字的输入框，还有就是点那个语音然后录音，这两种就是使用场景，
但是这个地方并不涉及到一对一还是一对多，他们的输入方式都是一样的，都是在那个框框里面打字或者使用语音呢。</p>
</div>
<div class="paragraph">
<p>上面举得例子都是为了传递信息，但是都是在不同的场景下使用不同的方式实现的，所以 <code>使用场景</code> 指的就是处于不同的场景下实现不同的功能，回到微信的例子，文字的使用场景就应该是打字的输入框，还有语音的使用场景就是点那个语音按钮过后录音，这些也就是微信的使用场景。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_程序算法数据结构">1.5. 程序=算法+数据结构</h3>
<div class="sect3">
<h4 id="_程序是什么">1.5.1. 程序是什么</h4>
<div class="paragraph">
<p>例：安卓的app</p>
</div>
</div>
<div class="sect3">
<h4 id="_算法是什么">1.5.2. 算法是什么</h4>
<div class="paragraph">
<p>逻辑就是算法</p>
</div>
<div class="paragraph">
<p>例：</p>
</div>
<div class="paragraph">
<p>输入一个参数要 <code>怎么</code> 去处理、 输入文字要 <code>怎么</code> 发送给对方、我是 <code>怎么</code> 让对方收到我发的消息或者我发的信息，包括语音，包括文字，图片我可以认为他是一种视觉的，是一种文件或者怎么样的，但这些都不是很重要，因为就算我不发图片我光靠打文字我也能讲清楚大部分事情，但是在威信诞生之初，大家是没有想过发图片这么一回事儿，你发短信都没有图片，你搞个微信发图片不是必要的，他只是起到一个丰富的作用，所以怎么让对方收到你的信息。你怎么让他收到，所以`这个怎么就是算法`。</p>
</div>
<div class="paragraph">
<p>内在核心：</p>
</div>
<div class="paragraph">
<p>How to ？      Answer——&gt;处理逻辑</p>
</div>
<div class="paragraph">
<p>例：</p>
</div>
<div class="paragraph">
<p>函数、代码块、代码设计（关系）——&gt;设计模式</p>
</div>
<div class="paragraph">
<p>我们之前写的课程表的算法就是怎么排课。</p>
</div>
</div>
<div class="sect3">
<h4 id="_数据结构是什么">1.5.3. 数据结构是什么</h4>
<div class="paragraph">
<p>你写函数的作用就是调用它，你调用他过后就产生一系列的行为和动作，那么最终你传输的过程当中你一定会携带某种存储结构，所以这个地方的数据结构指的是：</p>
</div>
<div class="paragraph">
<p>1、存储结构</p>
</div>
<div class="paragraph">
<p>2、怎么展示</p>
</div>
<div class="paragraph">
<p>例：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/微信界面.png" alt="微信界面">
</div>
</div>
<div class="paragraph">
<p>比如这是微信的对话框。然后下面这个地方是语音的那个符号啊，这个地方你打了文字。我打个比方，你最开始，你发了一个文字信息X给他。那么是你发的你在左边，然后左边这个是你发的文字，然后他又回了一个文字给你，比如这是y，这个地方数据结构包含两大类，第一类是他在网络上怎么去传输，就是你要配合算法去组合它，存储的一种结构，叫存储结构。存储数据结构，全称就叫这个，但这最前面一定省略了某个东西嘛，他一定是数据结构里面细分的东西嘛，所以他那里面有一种叫存储，就是说你文字怎么让他收到。在你看不见的领域，对吧？在网线上，或者在你的wifi上面流淌着那些数据流，这也有数据结构嘛，然后第二种就是说他收到过后，他怎么把那个信息展示出来让他的用户看见，他是在两大类，所以这个时候他要把用存储结构又转换成一种显示结构，然后最后就显示了屏幕上了，但是你在网线传的时候有可能携带了其他的杂七杂八的东西对吧。</p>
</div>
<div class="paragraph">
<p>内在核心：</p>
</div>
<div class="paragraph">
<p>what is？       Answer——&gt;数据关系（描述物体）</p>
</div>
<div class="paragraph">
<p>例：</p>
</div>
<div class="paragraph">
<p>结构体、类成员、数据表、List/Map、变量（这一类是做存储的，是程序内可见的）、Json/Xml/Html/Jpg(这一类是做传输的，是人类肉眼可见的)他们都是在描述数据怎么去展示的问题，都是在描述物体是什么。（描述物体本身或物体间的关系）。就比如你的姓名和年龄两个分开没啥问题。合在一起他也没问题，那你为什么合在一起啊？对啊，这个东西是你的。为什么我看到这个表单我就知道这是某某某。又比如说我们就只有一个字段，那个字段叫身份证号码，我就问你那身份证号码是不是能表示你啊。但是我说个性别男，他能表示你某一部分。他是在描述物体，为什么在描述物体，而不是描述事物？什么什么事情。比如说我吃饭这个事情你怎么了。去理解他的关系啊，你很难理解为什么他掺杂了很多东西，你用什么吃？对吧，你送嘴吃还是用。我也不知道用啥吃，对吧。你是用筷子还是用勺子，你用大碗还是小碗，你在哪儿吃？所以这个事情啊就是很麻烦。所以像这种数据结构啊，他通常描述的是客观世界里面具体某个东西，东西和东西之间的关系。</p>
</div>
<div class="paragraph">
<p>例：</p>
</div>
<div class="paragraph">
<p>微信的数据结构</p>
</div>
<div class="paragraph">
<p>这个地方就是聊回微信这个话题啊，那么刚刚讲了微信的发文字信息和发语音是微信的使用场景，算法就是 <code>怎么</code> 去发送消息？数据结构就是发送 <code>什么</code>（Json、List、Xml、数据表）消息？（具体到某个物件比如说螺丝钉）。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_编程要培养编程直觉">1.6. 编程要培养编程直觉</h3>
<div class="paragraph">
<p>同样是写代码，为什么你写的代码就是设计不好？就是因为你对这些理解不好，你对这些理解不好就导致你这个人是没有思维的。就好比在几岁的时候，特别是小孩子身上，特别明显，就是他们的逻辑思维非常好。为什么，他天天会问为什么，他一直在问这个问题。小孩子逻辑这样的，如果我哭就会有东西，我就一直哭，如果我哭不挨打，我就有东西吃，如果我哭又被挨打又没东西吃，然后If爸爸举手了，然后就不哭了。小孩子嘛，你看他们，他逻辑思维非常非常的强，为什么？你可以理解为他就是个状态机，就是看人下菜，看动作下菜，看眼神下菜，所以小孩子特别会看眼神。你长大了就不一样了我就不我偏不我就不干。那叫耍性子，你就已经没有逻辑思维了，要感情用事了。小孩子哪来感情呢？你就是天天喂他东西吃，你当宠物养，那是种食物关系，但是小孩子才出生的时候他一天到晚为什么嘛？对吧，他一天在干这个事情我怎么能拿到吃的。比如说那个医院，我举个例子的，那个孩子都哭的，都饿的呀，都一嘴哇哇大哭。然后奶奶抱起来，哄两下，他走到里面，走到里面走两个小时，饿晕了，当然就不哭啦。对吧，小孩子很简单的。怎么简单，哭了，要么是屎糊的屁股上屁股长红疹了。要么是肚子饿了，要么是哪儿扎着痛了，要么被蚊子咬了，对吧？做梦，他连魔鬼是啥都没见过。他做啥梦啊？对不对？他不可能出生就梦到魔鬼对吧？梦到观音菩萨下凡还是啥的吧，不会吧，对不对，所以你看到没有小孩子的概念真的很简单，他就是一个完全的生物有机体。他在按他的本能在去做这种反馈。比如小孩子被扎了，对吧？穿个衣服不舒服你一直动。关键是他才三个月或者才七天，他身都翻不了，你知道吗？就在那里啊啊啊的哭。然后呢，然后妈妈就说，再哭再哭给你两巴掌。相比真的说的话被扇了一巴掌挺痛的，那哭得更凶了，你放心，他会一直哭的，你打他，他会一直哭的。除非你把他打晕，那就不哭了。所以你看到没有？其实小孩子哈很小，他们他逐渐长长大，其实他逻辑思维是非常非常完整的，他也完整的逻辑念路。他有if else一堆。但随着你长大了过后你不会的。然后你身上我有吃的，我得先挣钱，而挣钱的话我先是卖屁股然后完蛋了。所以你就会把这个事情越想越复杂，其实很简单，没吃的嘛。你跑到商店面抢出来就有吃的了噻。你就被这个社会约定俗成的东西给框住了你的生物本能，你的人类本能就已经被限制住了。因为你有法律，或者有社会的道德约束。所以这个时候已经和他相隔十万八千里了，为什么？因为程序是没有道德的。他没有道德去约束他。他也没有爸爸妈妈，也没有感情，所以他就是个冰冷的机器，那一个冰冷的机器，你要怎么样成为个冰冷机器啊？就回到你还是个小娃娃小婴儿的时候。那个时候你就是冰冷的一个吃饭机器，天天要奶粉喝，你干饭机器就是那种这么养成的嘛。所以如果你要逻辑的话，小朋友的逻辑是更完整的。他更符合程序的直觉，所以你可以理解为你这个东西，最终你产这个东西叫程序直觉啊。程序直觉就是我刚刚举的这种，小朋友这种就是直接反应。没有过多的运算，凡是那种经过大脑社会道德，我该不该做这种运算已经和他不符了，所以你要培养的是程序直接这个东西。所以我刚讲的就是说，一旦你知道这些逻辑过后我打个比方，我以前我去学怎么编程的时候，我考虑的问题是。我点的那个按钮过后面发生了什么？我永远会去想根据那个按钮点了过后往后走，查查查查查。怎么通信的。我就一条链路就拉通了，但是这个需要大量的去写代码，大量的去试验。所以只要不删代码，啥都好办。所以像这个东西的话，就是你要靠去练。</p>
</div>
<div class="paragraph">
<p>但是这个地方你要经过大量的代码去练的话不现实，所以你一开始应该有浅显的认知。浅层次就可以了，你大概知道有那么回事。然后剩下就是你，当有这种直觉过后，你就开始去研究这种直觉。具体对应到现实世界或者你的软件哪一部分你去训练它。你去思考，你思考完了过后，那么你就会去补充你这边的这些理论。然后补充的越来越多，越来越完善，比如说最开始你学会的列表，最开始你学会的变量，A=1嘛，然后第二次，你又看到某个软件可以用，或者某个代码可以调某个demo，你可以研究一下，你研究完了就得到什么就得到list。像不像你某天打游戏的时候研究某个部件，然后他升华了，就变成一个战衣爆装备了。对吧，所以他也是这样一个过程啊，所以程序直觉，其实编程这个事情不是那么非常非常感性的编程它是有迹可循的。但是有迹可循它不是摆在明面上的，它是有一套训练方法，而60年代，70年代应该是linux ，unix，c语言发明出来，那发明除了到现在怎么去开发个软件，在业界都没有个统一的认知。你用a方法可以，你用b方法可以，甚至你不用方法也是可以的，就证明条条大路通罗马，就看你所学的哪一条，所以你培养程序直觉是怎么样？这个直觉的意思就是说，你从一个点到另外一个点，你清楚你的目标，所以第一个重点就是你清楚你的目标，我打个比方，我从成都到北京啊。我想从成都到北京，那是我的目标。我怎么去，所以说这涉及到方式的问题，开飞机还是坐火车还是走路？所以你的程序直接是这样的。你最开始训练出一种a方法，你可以达到这个目的，我觉得有个游戏嘛，就造桥嘛。那个桥你用的那个材料越少越牛逼，最开始你用1000个木头造出了桥，然后这个时候，你的效率就随着这个a方案，然后最后a+吧？然后就变成了a，然后效率更高，你的程序直觉是训练这个方法，而从a到a+这个过程，那么就是你的直觉训练。就直觉训练的过程，你训练完了，那么得到这个方法本身就得这个工具又爆了个装备嘛，那你说明掌握了一种技巧，所以你要不断的训练，反复，你可能这个方法不是最优的，你还要想办法去得到更优的。当然，具体写代码来说的话，你肯定就没有那么简单，你可能为了实现这个方法，你跟他学很多东西，那你清楚你的目标和方式。所以你训练的越多，那么你这个方法工具越多。比如说对于我来说，我的武器库里面就有各种核弹，各种常规战术导弹，各种狙击的子弹我流弹炮牌机炮都有，对于你来说你可能就小米加步枪，所以说你要让你的武器库里面越来越多。你武器库越多，那么你的威力越大，那这样的话你中你要想炸的那个房子是用核弹炸还是榴弹炸随便你挑？比如说我明天写一个javaweb程序，没关系，你用c也是可以写的。反正写个三个月嘛，就像用核弹去做了这个事情一样。然后你用springboot的去写，就像用榴弹炮去写嘛对吧。是不是然后有一天出现那个叫轻量级迷你springboot这就是迫击炮了撒，所以你的直接训练会决定你这个你的武器的多少，最终会达到某种目的，所以说你训练的越好。怎么样你的那个整个技巧，技能，技术栈就越靠近你的目标这个中轴线，你能最终你形成了这个线路啊，如果能够直捣黄龙就是最优解。</p>
</div>
<div class="paragraph">
<p>1、要清楚自己的目标。</p>
</div>
<div class="paragraph">
<p>2、要清楚自己的学习方式。</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_BCTS2_chapter">2. 编程通识(二)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_板书_2">2.1. 板书</h3>
<div class="imageblock">
<div class="content">
<img src="images/板书1.jpg" alt="板书1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/板书2.jpg" alt="板书2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_前言_2">2.2. 前言</h3>
<div class="paragraph">
<p>网络协议,如果要了解 <code>网络协议</code> ，首先得知道什么是 <code>网络</code> ，知道什么是网络过后，<code>协议</code> 自然而然就通了，最奇怪的是，还有第三个问题，就是什么是 <code>网络协议</code> 。</p>
</div>
<div class="paragraph">
<p>所以我们有3个问题</p>
</div>
<div class="listingblock">
<div class="content">
<pre> 什么是网络

 什么是协议

 什么是网络协议</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_什么是网络">2.3. 什么是网络</h3>
<div class="paragraph">
<p>90年代有一本叫《TCP/IP网络协议》那本书，上面写的：</p>
</div>
<div class="paragraph">
<p><code>“现在有高达几百万台电脑连接在了一起。”</code></p>
</div>
<div class="paragraph">
<p>最开始计算机两两相连，但是两两相连毕竟是很原始的状态，只能单向通信，而不能让两台计算机相互通信，现在发明出了计算机，但是很早之前并没有交换机的概念，就说白了先有网线才有了交换机，不可能发明一个交换机，发现没有东西连接，然后才发明网线，这么看来就觉得很怪。</p>
</div>
<div class="paragraph">
<p>举个例子</p>
</div>
<hr>
<div class="paragraph">
<p>如果没有电视机，就没有现在的安卓电视，如果说先发明安卓，才有安卓电视，这不可能吧。
所以说不用去查，肯定是先有了网线，才发明了交换机，因为为网线更简单，不过还是只能单向通信，但如果两个计算机想要互联怎么办呢？那这种网络拓扑就不够成熟了，所以我们在聊网络的时候，肯定讲的是 <code>互联网</code> 。</p>
</div>
<div class="paragraph">
<p>讲到了互联网，它的起源是美国国航部，当时美国国航部赞助了一个叫网络网际连接的项目，通过引入一个交换机，大家都连到这个交换机上去，那这样的话就形成了 <code>网络</code> 。美国人把网络取名为 <code>“NetWork”</code> ，那么这个Net就是网的意思。</p>
</div>
<div class="paragraph">
<p>网络，英文是：Network，上面说的互联网是美国国防部发明的，从广义上来讲，网络就是美国人发明的，取名叫Network，其中Net的意思就是网络，蜘蛛网不就是Nat。</p>
</div>
<div class="paragraph">
<p>从纯小白的视角可以这样来理解这个单词，就是一个网，可以理解每台电脑都是walker，那么网上就有很多worker，然后他们最终组成一张网， 最后统称就叫NetWork。</p>
</div>
<div class="paragraph">
<p>以此类推，每台计算机都是矿机,很多台矿机最后组成了矿网，</p>
</div>
<div class="sect3">
<h4 id="_互联网与万维网">2.3.1. 互联网与万维网</h4>
<div class="paragraph">
<p>万维网和是互联网区别在哪，万维网能称为万维网，万维网就只作用于浏览器输入网址或者和网页产生关系的地方，只要和浏览器扯上关系的都是万维网的一部分，但是国防部最开始发明的可不是万维网。最开始发明的是Network，所以万维网属于NetWork的一部分。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_补充学习编程到底在学习什么">2.4. 补充：学习编程到底在学习什么？</h3>
<div class="paragraph">
<p>打个比方</p>
</div>
<div class="listingblock">
<div class="content">
<pre>变量a=1
变量b=3
变量c=a+b
那么C的值是多少</pre>
</div>
</div>
<div class="paragraph">
<p>这道题是一道编程题也是一道数学题，它们没有本质的区别，所以可以说编程和数学是紧密联系在一起的，不过它们有对与世界着不同的理解。</p>
</div>
<div class="sect3">
<h4 id="_数学">2.4.1. 数学</h4>
<div class="paragraph">
<p>举个例子嘛
小时候学的加减法，在生活中可以用来买菜，乘法或者除法也是可以的，到了六年级，就开始学代数，到了初一初二就开始学几何，到了高中，等差数列，还有很多更高级东西，其实它们都是来源于生活。数学家，一代一代传承然后经过几百年的发展，他把自己看的某种现象给总结出来了。甚至前几年，浙江大学有篇论文叫博弈论，这个博弈论就研究石头剪刀布的事儿,还花了国家的钱去研究，但是普遍人都认为：“这个东西都要研究？简直不可思议。”但是研究人员就真的通过总结一系列规律后,总结出石头剪刀布的时候怎样才能提高你的胜率,当某天你和别人石头你看论文过后，你能够达到目的。</p>
</div>
<div class="paragraph">
<p>再比如说， <code>万有引力</code> ，如果苹果有砸到头上，普通人肯定不会想到万有引力，可是牛顿就想到了。</p>
</div>
<div class="paragraph">
<p>现在的数学家甚至黑洞都能计算。</p>
</div>
<div class="paragraph">
<p>从上面的例子就可以看出，数学更多的是总结规律，那么数学就是 <code>对客观世界的规律或者事物的一系列的总结</code> 。</p>
</div>
</div>
<div class="sect3">
<h4 id="_编程">2.4.2. 编程</h4>
<div class="paragraph">
<p>那么编程呢？
编程其实就是我们经常讲到编程编程是某某件事情，并不是指代某个东西。
那么 <code>编程为动词，数学为名词</code> ，和数学对等的叫做程序。</p>
</div>
<div class="paragraph">
<p>上面数学是总结世界的运行规律，程序呢？先偷换个概念，我们先给程序这个东西进行归类，每当我们看新东西，不知道他是啥 ，就会去对他进行归类。那程序，首先他应该是某种工具。 那人类用工具是干啥的呀？
远古时期，原始人第一次发现可以用锋利的石头，给自己做一件大衣，貂皮大衣；用火烤的肉更香，除了肉更香以外，吃了还不会拉肚子，还可以长寿，估计最开始有人吃生的，有人吃熟的，结果发现，吃熟的人到活到了30岁40岁，而不吃熟的拉肚子死掉了 。所以说工具的是和效率挂钩的人类发明工具或者是找到某种工具或者制作工具，一定是为了自己服务的 。那程序也是工具，所以说程序也是用来提高人类的工作效率的，那么，它是怎么提高工作效率的呢？
程序首先是代替人类完成工作的，程序的速度很快，这里的速度就有两层意思，那么第一层更快说是指的 <code>计算速度快</code> ，那第二层意思更快，意思说，下一次程序要做同样的事情的时候，就只是把程序拿出来跑一遍，就像洗碗一样，第二次拿个洗碗的刷子，就指的 <code>重复使用</code> 。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_什么是协议">2.5. 什么是协议</h3>
<div class="paragraph">
<p>我们先把上面讲网络的概念放下来，就是很多计算机中间一个交换机的例子，我们将这个例子里面的计算机代换成一个个小人,假设那是atm机里面小人，那里面的小人在干啥？他在里面工作，那么每一台atm机之间或者人之间，他们都有相互联系，这样就组成了一个 <code>人际关系网</code> ，他们之间相互联系，但是我们没有交换机，就把空气当做交换机，人与人之间交流也是靠空气来传播的，那么空气就是人与人“连接”的一条线,连接的主要作用就是传递信息，那要怎么才能把信息传递出去呢？在人与人之间传递信息主要依靠的是语言，所以语言就是传递信息的主要方式，语言之下也有不同的实现方式，比如语音，字等等，但是语言还是要就借助“连接”，连接可以理解为更大层次，它就是一个 <code>工具</code> 的载体，那连接这类 <code>工具</code> ，你要要用说话的方式，要用一种语言的方式让他生效，</p>
</div>
<div class="sect3">
<h4 id="_举个例子">2.5.1. 举个例子</h4>
<div class="paragraph">
<p>一个婴儿在咦呀哇的乱叫的时候，你是听不懂的，你不知道他在叫什么，为什么？因为你不是婴儿，你的语言系统已经成熟了，不知道他的婴语究竟代表什么东西。在07、08年的时候，有个视频超级火，两个光头的外国人小男孩，才学会走路，也就就一岁多一点，两个人穿的小baby的衣服走来走去的，当他们走到厨房的角落，其中一个婴儿把袜子脱下来，闻了一下，就开始哇哇哇哇的叫。而且最关键是视频长达67分钟。叫完过后，其中一个小男孩走过来把冰箱打开，接着就开始咦呀哇的，然后另外小男孩就走过来了，这样证明他们之间是有沟通的，但是你听不懂。 所以这个时候他们之间的婴语，对于他们来说，是生效的，对于我们来就没有办法理解一致，那么这个时候他们的语言对你来说是无效的，所以上面我们在人际网络里面就需要使用共同的语言来通信。</p>
</div>
<div class="paragraph">
<p>语言其实就是 <code>工具</code> ，那么 <code>连接</code> 要承载信息嘛，还要信息要流转，那就是协议咯
在网络上面都有计算机，有计算机过后，就会产生数据，但网络上肯定不止一台计算机，现在假设有两台计算机，就会产生数据A(Data A)和数据B(Data B)两个数据，产生了这两个数据过后，因为数据产生就会传递给对方那么就有起点和终点 ，那么他们之间相互连接的网线就是数据的 <code>载体</code> ，但这时载体发送数据它并不能听懂，所以还差一个东西，就是 <code>协议</code> ,平时也叫通信协议。
那这时候在网络就有几类大的东西：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>计算机、数据空间、协议、网线</pre>
</div>
</div>
<div class="paragraph">
<p>网线就是通信协议流淌的载体，是通信的基础条件，是硬件，计算机也是硬件，而协议则是软件，在下图</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/网线里有什么.png" alt="网线里有什么">
</div>
</div>
<div class="paragraph">
<p>Computer A要向Computer B发送数据，上图就是根网线，网线就相当于高速公路，外面的皮是网线皮，这皮里头有同心线，这个时候呢里面肯定还流淌着协议(网络语言),里面充斥着Data A一直流，发送到Computer B后返回的数据就是Data B，严格意义上来讲的话：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>网线就是一条高速公路，上面有两个方向，高速公路你开过去的时候，产生Data A，到达Computer B后产生Data B返回回来，这个时候Data是指数据0101，但是如果要让双方都能听懂，就必须带语言格式(协议)</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_什么是网络协议">2.6. 什么是网络协议</h3>
<div class="paragraph">
<p>网络协议是通信计算机双方必须共同遵从的一组约定。如怎么样建立连接、怎么样互相识别等。只有遵守这个约定，计算机之间才能相互通信交流。</p>
</div>
<div class="paragraph">
<p>这里的网络就是指流淌在操作系统内部的东西（OS内）</p>
</div>
<div class="sect3">
<h4 id="_协议">2.6.1. 协议：</h4>
<div class="paragraph">
<p>协议其实跟语言一样，语言有中文、英语、西班牙语等。</p>
</div>
<div class="paragraph">
<p>TCP/IP协议：TCP（传输控制协议）和IP（网际协议）</p>
</div>
<div class="paragraph">
<p>TCP/IP提供了点对点链接的机制，将资料应该如何封装、寻址、传输、路由以及在目的地如何接收，都加以标准化。它将软件通信过程抽象化为四个抽象层，采取协议堆栈的方式，分别实现出不同通信协议。协议族下的各种协议，依其功能不同，分别归属到这四个层次结构之中[7][8]，常视为是简化的‘七层OSI模型’。</p>
</div>
<div class="paragraph">
<p>七层OSI模型：</p>
</div>
<div class="paragraph">
<p>第7层 应用层
主条目：应用层
应用层（Application Layer）提供为应用软件而设计的接口，以设置与另一应用软件之间的通信。例如：HTTP、HTTPS、FTP、Telnet、SSH、SMTP、POP3等。</p>
</div>
<div class="paragraph">
<p>第6层 表示层
主条目：表示层
表示层（Presentation Layer）把数据转换为能与接收者的系统格式兼容并适合传输的格式。</p>
</div>
<div class="paragraph">
<p>第5层 会话层
主条目：会话层
会话层（Session Layer）负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接。</p>
</div>
<div class="paragraph">
<p>第4层 传输层
主条目：传输层
传输层（Transport Layer）把传输表头（TH）加至数据以形成数据包。传输表头包含了所使用的协议等发送信息。例如:传输控制协议（TCP）等。</p>
</div>
<div class="paragraph">
<p>第3层 网络层
主条目：网络层
网络层（Network Layer）决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络资料。例如:互联网协议（IP）等。</p>
</div>
<div class="paragraph">
<p>第2层 数据链路层
主条目：数据链路层
数据链路层（Data Link Layer）负责网络寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成信息框（Data Frame）。数据链表头（DLH）是包含了物理地址和错误侦测及改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等。</p>
</div>
<div class="paragraph">
<p>分为两个子层：逻辑链路控制（logical link control，LLC）子层和介质访问控制（Media access control，MAC）子层。</p>
</div>
<div class="paragraph">
<p>第1层 物理层
主条目：物理层
物理层（Physical Layer）在局部局域网上发送数据帧（Data Frame），它负责管理电脑通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机接口卡等。</p>
</div>
</div>
<div class="sect3">
<h4 id="_tcp子集_httpftpudptcpsmtppop3imap">2.6.2. TCP子集 （HTTP、FTP、UDP、TCP、SMTP、POP3、IMAP）</h4>
<div class="paragraph">
<p>HTTP：超文本传输​​协议（HTTP）是一个用于传输超媒体文档（例如 HTML）的应用层协议。它是为 Web 浏览器与 Web 服务器之间的通信而设计的。</p>
</div>
<div class="paragraph">
<p><a href="http://XXX.com" class="bare">http://XXX.com</a></p>
</div>
<div class="paragraph">
<p>ssh://XXX.com</p>
</div>
<div class="paragraph">
<p>比如说一个连接有两个点:</p>
</div>
<div class="paragraph">
<p>server————————client</p>
</div>
<div class="paragraph">
<p>连接是由client发起的，就有了客户端跟服务端的概念，客户端上用的通信是HTTP协议，里面又包裹了HTML。</p>
</div>
<div class="paragraph">
<p>FTP：文件传输协议（英语：File Transfer Protocol，缩写：FTP）是一个用于在计算机网络上在客户端和服务器之间进行文件传输的应用层协议。文件传送（file transfer）和文件访问（file access）之间的区别在于：前者由FTP提供，后者由如NFS等应用系统提供。</p>
</div>
<div class="paragraph">
<p>UDP：用户数据报协议（英语：User Datagram Protocol，缩写：UDP；又称用户数据包协议）是一个简单的面向数据报的通信协议，位于OSI模型的传输层。在TCP/IP模型中，UDP为网络层以上和应用层以下提供了一个简单的接口。UDP只提供数据的不可靠传递，它一旦把应用程序发给网络层的数据发送出去，就不保留数据备份（所以UDP有时候也被认为是不可靠的数据报协议）。UDP在IP数据报的头部仅仅加入了复用和数据校验字段。UDP适用于不需要或在程序中执行错误检查和纠正的应用，它避免了协议栈中此类处理的开销。对时间有较高要求的应用程序通常使用UDP，因为丢弃数据包比等待或重传导致延迟更可取</p>
</div>
<div class="paragraph">
<p>TCP：传输控制协议（英语：Transmission Control Protocol，缩写：TCP）是一种面向连接的、可靠的、基于字节流的传输层通信协议，由IETF的RFC 793定义。在简化的计算机网络OSI模型中，它完成第四层传输层所指定的功能。用户数据报协议（UDP）是同一层内另一个重要的传输协议。TCP协议的运行可划分为三个阶段：连接创建(connection establishment)、数据传送（data transfer）和连接终止（connection termination）。操作系统将TCP连接抽象为套接字表示的本地端点（local end-point），作为编程接口给程序使用。在TCP连接的生命期内，本地端点要经历一系列的状态改变。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SMTP,%20POP3,%20IMAP.png" alt="SMTP, POP3, IMAP">
</div>
</div>
<div class="paragraph">
<p>SMTP：简单邮件传输协议（英语：Simple Mail Transfer Protocol，缩写：SMTP）是一个在互联网上传输电子邮件的标准。SMTP是一个相对简单的基于文本的协议。在其之上指定了一条消息的一个或多个接收者（在大多数情况下被确认是存在的），然后消息文本会被传输。可以很简单地通过telnet程序来测试一个SMTP服务器。SMTP使用TCP端口25。要为一个给定的域名决定一个SMTP服务器，需要使用DNS的MX记录。在八十年代早期SMTP开始被广泛地使用。当时，它只是作为UUCP的补充，UUCP更适合于处理在间歇连接的机器间传送邮件。相反，SMTP在发送和接收的机器在持续连线的网络情况下工作得最好。</p>
</div>
<div class="paragraph">
<p>POP3：邮局协议（英语：Post Office Protocol，缩写：POP）是TCP/IP协议族中的一员，由1996年5月发行之RFC1939 首次定义。此协议主要用于支持使用客户端远程管理在服务器上的电子邮件。最新版本为POP3，全名“Post Office Protocol - Version 3”，而提供了SSL加密的POP3协议被称为POP3S。POP支持离线邮件处理。其具体过程是：邮件发送到服务器上，电子邮件客户端调用邮件客户机程序以连接服务器，并下载所有未阅读的电子邮件。这种离线访问模式是一种存储转发服务，将邮件从邮件服务器端送到个人终端机器上，一般是PC机或Mac。一旦邮件下载到PC机或Mac上，邮件服务器上的邮件将会被删除。但目前的POP3邮件服务器大都可以“只下载邮件，服务器端并不删除”，也就是改进的POP3协议。</p>
</div>
<div class="paragraph">
<p>IMAP：因特网信息访问协议（英语：Internet Message Access Protocol，缩写：IMAP；以前称作交互邮件访问协议）是一个应用层协议，用来从本地邮件客户端（如Microsoft Outlook、Outlook Express、Foxmail、Mozilla Thunderbird）访问远程服务器上的邮件。</p>
</div>
<div class="sect4">
<h5 id="_pop3_smtp_imap的区别在哪里">POP3, SMTP, IMAP的区别在哪里？</h5>
<div class="paragraph">
<p>简单地说，SMTP管‘发’， POP3/IMAP管‘收’。</p>
</div>
<div class="paragraph">
<p>举个例子，你坐在电脑边用mail client写完邮件，点击‘发送’。这时你的mail client会发消息给邮件服务器上的SMTP service。这时有两种情况：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如果邮件的收信人也是处于同一个domain，比如从http://163.com发送给163的邮箱，SMTP service只需要转给local的POP3 Service即可</p>
</li>
<li>
<p>如果邮件收信人是另外的domain，比如http://163.com发送给http://sina.com， SMTP service需要通过询问DNS, 找到属于sina的SMTP service的host。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>SMTP service收到邮件后转给负责接收邮件的POP3 service</p>
</div>
<div class="paragraph">
<p>POP3 service和IMAP的区别主要是：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>POP3是比较老的protocol，主要为了解决本地机器和远程邮件服务器链接的问题，每次邮件会download到本地机器，然后从远程邮件服务器上删掉（当然特殊config除外），然后进行本地编辑。这样的问题是如果从多个终端链接服务器，只有第一个下载的能看到，现在pop4正在讨论中</p>
</li>
<li>
<p>IMAP是比较新的（好吧，好像也是80年代的产物）protocol，可以将邮件分文件夹整理，然后这些信息也存在远程的邮件服务器上，读取邮件后，服务器上不删除。原理上IMAP应该是相当于oneline编辑，但现在的mail client基本都有在本地存copy的功能。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ip子集icmparp">2.6.3. IP子集(ICMP\ARP)</h4>
<div class="paragraph">
<p>ICMP：互联网控制消息协议（英语：Internet Control Message Protocol，缩写：ICMP）是互联网协议族的核心协议之一。它用于网际协议（IP）中发送控制消息，提供可能发生在通信环境中的各种问题反馈。通过这些信息，使管理者可以对所发生的问题作出诊断，然后采取适当的措施解决。ICMP [1]依靠IP来完成它的任务，它是IP的主要部分。它与传输协议（如TCP和UDP）显著不同：它一般不用于在两点间传输数据。它通常不由网络程序直接使用，除了 ping 和 traceroute 这两个特别的例子。 IPv4中的ICMP被称作ICMPv4，IPv6中的ICMP则被称作ICMPv6。</p>
</div>
<div class="paragraph">
<p>ARP：地址解析协议（英语：Address Resolution Protocol，缩写：ARP）是一个通过解析网络层地址来找寻数据链路层地址的网络传输协议，它在IPv4中极其重要。ARP也可能指是在多数操作系统中管理其相关地址的一个进程。ARP是通过网络地址来定位MAC地址。</p>
</div>
<div class="paragraph">
<p>VPN（企业内部协议）:虚拟私人网络（英语：virtual private network，缩写：VPN）是常用于连接中、大型企业或团体间私人网络的通讯方法。它利用隧道协议（Tunneling Protocol）来达到发送端认证、消息保密与准确性等功能.</p>
</div>
<div class="paragraph">
<p>例：一个员工出差想访问公司的局域网，他就要进行拨号，打开软件才行，VPN 就会帮你虚拟一张网卡出来，一旦拨号了之后就会有一个IP地址，如果没拨就是没有IP地址的，没有IP地址就不能上网，就不能上公司的局域网。</p>
</div>
<div class="paragraph">
<p>网络协议就是指的这上面的东西。</p>
</div>
</div>
<div class="sect3">
<h4 id="_要理解计算机世界是怎么运行的非常重要">2.6.4. 要理解计算机世界是怎么运行的非常重要！！！</h4>
<div class="paragraph">
<p>一旦你理解了这个过后，你去学很多其他的东西就ok了，比如说有一天，你遇到企业内部的软件出问题了。你没有见过他，难道你就不知道他是怎么回事吗？</p>
</div>
<div class="paragraph">
<p>举个例子：</p>
</div>
<div class="paragraph">
<p>某一天，公司里面的的出纳小姐姐找到我说帅哥能帮我看看吗？她说电子税务的那个软件打不开。当然我帮他解决打不开这个问题，解决了五花八门，最简单的就是经过我一顿骚操作，我就蹲下去插了下网线好了，结果是因为那个下面线太多，小姐姐踢到了，网线就踢松了，他那个网口不牢就踢松了。但是没有开机这种事情我就不讲了，那他自己能解决。我遇到了我跟他解决过很多次这种他那个软件打不开的问题，为什么因为在她的概念里面，电子税务软件出问题了，问题很严重。对吧，但在我的理解里面，这个计算机出什么问题了？然后才是软件，我要先排除计算机有没有问题？对吧。你连windos网络都不通，一上来。Alt+R 输入 cmd，一个黑色窗口，ping一个qq.com然后回车，网络不通，插一下网线好了。</p>
</div>
<div class="paragraph">
<p>你会发现我其实我不懂那个电子记账系统，我也不清楚，但是别人为了为什么遇到问题老去找我为什么，因为我很清楚计算机出什么问题了？我不会被错误迷失了双眼。所以要理解计算机是怎么工作的，他是怎么运行的，非常非常重要。</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_XMSZ1_chapter">3. 项目实战(一)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_板书_3">3.1. 板书</h3>
<div class="imageblock">
<div class="content">
<img src="images/板书1.jpg" alt="板书1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/板书2.jpg" alt="板书2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_前言_3">3.2. 前言</h3>
<div class="paragraph">
<p>这篇随笔会穿插很多项目，因为讲太多，不动手的话手会生。</p>
</div>
<div class="paragraph">
<p>C01讲的是 <code>Radis</code> ，是一个很复杂的系统，因为当时所有成员都已经有编程经验了，所以就上了一个看起来高大上的一套框架和组织架构。</p>
</div>
<div class="paragraph">
<p>C02的话做了 <code>GeeShow</code> ，属于一种中型项目，有简单的地方，也有技术挑战，然后他也有就是很复杂的理念，至少在市面上见不到第二个，</p>
</div>
<div class="paragraph">
<p>那这次C03的话，就是做一个Linux监控系统。</p>
</div>
</div>
<div class="sect2">
<h3 id="_项目背景">3.3. 项目背景</h3>
<div class="sect3">
<h4 id="_常用监控软件">3.3.1. 常用监控软件</h4>
<div class="paragraph">
<p>监控系统其实在Linux平台或者服务器里并不少见</p>
</div>
<div class="paragraph">
<p>比如说现在已经有:</p>
</div>
<hr>
<div class="paragraph">
<p><code>Zabbix</code></p>
</div>
<div class="paragraph">
<p>由Alexei Vladishev 开发的一种网络监视、管理系统，基于 Server-Client 架构。可用于监视各种网络服务、服务器和网络机器等状态。</p>
</div>
<hr>
<div class="paragraph">
<p><code>Cacti</code></p>
</div>
<div class="paragraph">
<p>一种基于Web的开源网络监视和绘图工具，设计为开源的，行业标准的数据记录工具RRDtool的前端应用程序。</p>
</div>
<hr>
<div class="paragraph">
<p><code>Nagios</code></p>
</div>
<div class="paragraph">
<p>电脑系统和网络监控程序，用于检测主机和服务，当异常发生和解除时能提醒用户；是基于GPLv2开发的开源软件，可免费获得及使用。</p>
</div>
<div class="paragraph">
<p>这些都是比较常见的监控软件，这些软件主要就是把服务器的CPU带宽、硬盘、内存、进程数还有很多其他东西通过统计分析的方式，画成图表展示出来，既然这些软件能生成图表，就意味有数据库，如果没有数据库就无法生成图表。</p>
</div>
<div class="paragraph">
<p>至于数据库，用常见的 <code>关系型数据库</code> 或者存储到文件里面的 <code>纯XML</code> 都没有关系，因为最终都能读出来。</p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_它们存在的问题">3.3.2. 它们存在的问题</h4>
<div class="paragraph">
<p>上面的软件都集中解决的是一个问题，第一个问题就是它的覆盖面是比较通用领域，那么它们是用来解决通用领域，既然是解决通用领域的问题，那就意味着他们就是 <code>同质化</code>，但同质化解决问题就相对的比较之后。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>同质化：指同一大类中不同品牌的商品在性能、外观甚至营销手段上相互模仿，以至逐渐趋同的现象</pre>
</div>
</div>
<div class="paragraph">
<p><code>举个例子</code></p>
</div>
<div class="paragraph">
<p>公司的服务器老死机，然后工作人员查死机的原因，当他查不出来具体的原因，他就通过监控软件，监控软件可能显示CPU有异常，但是并不清楚具体是哪个地方出了问题，比如说看到CPU占用100%，然后监控软件给你提供一个线索，所以说用这种监控，他可以帮你解决问题，但是从强哥的从业经验来说，我解决这种疑难杂症问题，从来不依赖他们，为什么？因为他们都一样，你比如说像宋波峰，我没有让他搭过监控软件，我也没有让黄臣玉去搭监控软件，我也没有让卢宇去搭，我也没有让李喜去搭，为什么？因为这种东西装着玩儿就可以了，这个东西本来它就不重要，因为他只是给你提供一个 <code>线索</code>，那既然你能提供线索，那么在CPU超温或者僵死的时候，系统日志里面已经提示你cpu冻住、卡住了，那么系统日志里面已经提供了线索，就不需要跑到监控的软件上去看它生成的图形，然后有人就说：“图形很好看，日志不好看。”那既然都去解决问题了，肯定也不在乎友不友好，因为你有那个能力去查日志，日志才是追根溯源最好的东西，相反图形这些东西，他只是起个辅助作用，所以他不是决定性的，是通用的。</p>
</div>
</div>
<div class="sect3">
<h4 id="_项目背景_2">3.3.3. 项目背景</h4>
<div class="paragraph">
<p>现在Linux可是 <code>巨量的</code>（都不是说大量的）在使用，他是 <code>服务器领域的事实标准</code>，尽管我们会讨论说CentOS好还是Ubantu好，但是从来没有讨论过Windows和Linux该选谁？</p>
</div>
<div class="paragraph">
<p>在我才开始学习Linux那一段时间还充斥着一种说法：“Unix更稳定，Linux不稳定。”但是我从来没有在任何一台服务器上面去装过Unix，因为最开始我在自己的PC上装Unix，发现要装上它是个艺术活，为什么？因为它里面不带驱动，驱动都要你自己弄，最关键基本市场上的驱动都适配的Linux，Unix由于版本还有各种东西都很老，当然也有新的，不过大部分情况下厂商并没有进行适配，这个时候，你要去解决各种各样非常奇怪的问题，那既然我用操作系统目的就是因为我不能写底层的东西，那现在你都让我介入到你的内核里的驱动层面去了，这样不就和我自己写驱动没有什么本质的区别，所以对于系统优先选择就应该是一个成熟标准的系统，那么Unix和Linux相比，那肯定是Linux，这是其一，其二就是Linux和Windows根本就没可比性。</p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_还有哪些领域在用linux">3.3.4. 还有哪些领域在用Linux？</h4>
<div class="paragraph">
<p>上面说到“Linux已经成为服务器领域事实上的标准了”</p>
</div>
<div class="paragraph">
<p><code>打个比方</code></p>
</div>
<div class="paragraph">
<p>在手机上随便打开一个软件，哪怕是微软的Office365，他的服务器肯定是跑在 `Nginx`下面的，既然都跑在 `Nginx`下面，那么搭建在Linux上就很香，微软有个语音叫Azure，Azure的平台，最开始只卖微软的云，那就只用于微软的Windows，结果过了几年都没起色，直到微软换了一个印度的CEO，这个人推从开源，上一届是鲍威尔和比尔盖茨他们两个在主事，然后他们两退了，他们退了后那就是印度的CEO在主事，那个CEO是一个财务和市场营销出身的，他就只关心钱，他并不关心技术或者生态层面的东西，所以在很长一段时间里微软在开源领域说Linux是毒瘤，就因为Linux抢占了Windows市场份额了，可以想象微软当时是敌对的态度，之后印度的那个CEO上台了，叫萨提亚·纳德拉，他上台就开始推行政策，让微软全面拥抱开源生态，首当其冲的成为了Linux核心基金会的成员，其实要成为Linux核心基金会会员很简单，拿钱买就行了，告诉他我要做这个事，他就会让你进，当然，微软后面夹带私活要想在内核里面加入他的exFAT文件系统，然后Linux大声说Get out，为什么？因为那个东西和你Linux没有半点关系，都是微软的私货，我给Inte说我的CPU有漏洞，我要为了几个漏洞加第二个补丁，不过这个补丁也是一个漏洞、后门，求求Linux让他加进去，然后你Linu也对他说Get Out。所以想加入Linux生态，给钱就可以了，但是你真正想参与其中，你必须要做对社区和生态有益的事情。那之前说的Azure这个云平台，他后面也支持Linux了，自从发现支持Linux后生意大大的好，微软甚至自己的东西都架在了Linux上面。包括他的官方网站，还有IIS、webserver，结果他自己都不用，他用Nginx做前端负载，后端IIS，这也无所谓。这就证明一个问题啊，在负债均衡和反代领域，Nginx才是绝对的王，绝对的流量入口。那看到Nginx也是跑在Linux下面的，你不可能跑个Windows下面，在Windows下面性能贼差，为什么？Nginx官方说在windows上是实验性的，支持很差的，那就是个玩具，谁用谁知道，那这是一个，那微软后面还做了Open JDK，他也开始支持自己的发行版了。</p>
</div>
<div class="paragraph">
<p>微软的发行版名字贼怪，表面上看起来Windows应该是绝对数量的，但实际上在 <code>重要的领域</code> 和 <code>头部</code>，Linux更占数量。</p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_什么叫头部">3.3.5. 什么叫头部？</h4>
<div class="paragraph">
<p>在服务器用的最多的那些厂商里头100%的都是Linux，不否认说尾巴后面有时候中小企业，小微企业，他们没有能力去用Linux，就会用windows，比如说像那个万科这种房地产的，没有任何技术含量，跨界他需要有一些服务器来做它内部的云或者软件，那他肯定会装windows，所以Windows是肯定有的，而且数量还不少，但是头部才是决定你找工作的或者是从业人员选择的一个重要因素，尾巴上那些顺带会一下就可以了，在这个行业里面，Linux绝对是服务器领域的事实标准，只是大家都在用发行版吵架，但是不妨碍他是Linux。</p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_linux存在的问题">3.3.6. Linux存在的问题</h4>
<div class="paragraph">
<p>Linux用的多了后就存在 <code>管理问题</code>，操作系统都是需要维护的，比如说：</p>
</div>
<div class="paragraph">
<p><code>安全补丁</code></p>
</div>
<div class="paragraph">
<p><code>版本升级</code></p>
</div>
<div class="paragraph">
<p><code>发布新版软件去迭代</code></p>
</div>
<div class="paragraph">
<p><code>流量大了过后还要去做各种调整或者策略</code>、</p>
</div>
<div class="paragraph">
<p><code>通过Debug找哪个地方慢</code></p>
</div>
<div class="paragraph">
<p>比如说在中小企业里，他们写的程序很慢，但是慢的问题都是有本质共通性的原因，具体原因也不知道，反正就是各种各样的问题，每个操作系统上都有这种需求，那么Linux也不例外，数量越多，存在管理的问题就越多，比如说华为或者富士康，郑州、东莞的富士康工厂一个就有几十万人，这么多人，就存在各种各样的宿舍管理问题，时不时就跳个楼啥的，就算里拉上了蜘蛛网，你一跳跳到网上能接住几个是几个，没接住就都死翘翘了，至少还有赔偿金，所以这就成为了管理问题，人多了过后要管理人，那么软件多也要管理软件，那操作系统也是软件也需要管理，这种问题一旦出现，无法解决，那么这个时候就提出了管理的要求，那么管理的需求是存在的，那之前在最开始讲过的哪些已经有的监控软件，它们都有一种通用性，并不能解决企业当中的问题，为什么？</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

企业的老板，他已经知道了这个服务器已经死过3次机了，那他现在要解决问题，什么问题？ “服务器为什么会宕机？”这是一种场景，但是如果你连用户都没有，死啥机呀。</pre>
</div>
</div>
<div class="paragraph">
<p>所以在死机之前，还有一个阶段，</p>
</div>
</div>
<div class="sect3">
<h4 id="_起步阶段">3.3.7. 起步阶段</h4>
<div class="paragraph">
<p>这一阶段就是企业从零开始做，企业老板需要了解他的用户数据，而系统管理是一个消耗性岗位或者消耗的事情需要去做的，但这种消耗对于企业的就是投资方或者老板，他并不关心，他最关心的是他能 `收入`多少。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

你告诉一个老板说：全中国政府，他们都有各种招标，我写了一个爬虫，我把所有的招标消息通过爬虫爬到了我的平台里，每个月花500块钱订阅我的邮件，我会自动把全国的招标信息发邮件推给你。这样只要去找到你的客户，他绝对会买，因为相比于人情事故、打电话还要请吃饭维护关系来说。你这样的话至少能给他更多的机会，他都不知道，那个地方要招标，那个标就和他没关系。他一订阅了你的平台，他就知道那个地方有标了，比如说：政府强制规定，招标必须向外公布，那比如说你是市长啊。其实那个网站上已经发了，但假设我作为一个土豪，我就会直接问“市长，最近有什么生意可以做呀？”然后市长说“我们最近有个招标”</pre>
</div>
</div>
<div class="paragraph">
<p>那么这种是靠人际关系才知道招标的消息，但是搞技术的人就应该看网站。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>举个例子

我的老家要拆迁，其实拆迁的消息我早几年前就知道了，但是那个时候我非常清楚他处于规划阶段，为什么？因为当地规划局网站上明确的写着规划是多久到多久，甚至某个地方修机场，我比新闻还提前知道，三天两头去看那个规划网站，因为国家规划局只要定版了就开始是进入后续阶段，要是规划都没做，就不用考虑了。</pre>
</div>
</div>
<div class="paragraph">
<p>我们搞技术的，就要用技术的方法去解决问题，而这个市场上的需求方或者老板，他们只关心收入，他不会关心你帮他节约了多少块钱，他觉得只要挣500块我就不关心那节约的500块，因为挣500块属于流动资金，而节约500那不叫流动资金，和支出是不一样的，流动资金能从一个人的钱包流到另一个人的钱包，那你们两个都有500块钱收入，你们两个加起来收入1000块钱，但是如果这种问题一旦出现，少给一个人发了500块钱，那就叫节约开源截流，看起来，大家都不高兴，为什么？因为一个人少收费500块钱。</p>
</div>
<div class="paragraph">
<p>所以这种暴露出的问题啊有几类，第一个那么当用户在项目的初始阶段或者起步阶段，最重要的是了解自己的发展状态、运营状态，这个地方范围会很大，具体来说我的运营状态里面包括我向市场投了广告，那广告的点击量是多少？我投了电梯广告或者是那个电视广告哈，我的完播率或者是观看量是多少？还有每天客户打进来的电话数量是多少？那么有了数量过后有成交率，就是打了电话里面的人有多少人买了我的东西，这就叫成交率，那我得了解我的成交率是多少？成交率有了过后还有退货率，最近鸿星尔克电话都被打爆了，火了之后销量是直接往上涨，最后自己的工厂实在顶不住那么大的订单量，那么就只能退款一些，所以这些老板都很清楚，这些都是人类社会存在几千年的规则了，不需要你去加工，专业的人比你还专业，但是现在已经步入信息化社会，那就意味着这个过程中肯定会用很多软件，这些软件里面订单量，他可以从后台看到的，所以也不需要你操心，反正那个收钱和你没关系，但是有个问题，你那么多订单量到了你的服务器上面，你服务器什么状态啊？</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

如果你是京东的老板，你想知道每天多少人浏览你的网站，怎么解决？</pre>
</div>
</div>
<div class="paragraph">
<p>现在做法就是挂一个百度的JS文件在网页的最下头，每当有人访问你的网页的时候也会访问百度那个JS，那么服务器上就会产生一条Web日志，百度就用那个日志来做分析，不过这个已经技术很成熟了，一二十年了，不过还有个问题，这个只是解决了运营里面比较前端的事情，就是眼睛能看得见的那一部分，而眼睛看不见的那部分是从用户发起请求到服务器上后到底发生多少事情？前端肉眼能看得见的那一部分你都很了解，各种各的地方都可以让你看，但你并不了解服务器上的东西，你非常清楚用户从哪来到哪去，甚至用户的性别，电话号码都有，但你就是不清楚你自己的系统，以及整个运营过程的状态，所以这是个很严重的问题，这个问题在十年前就存在了，十年后的今天还没解决好。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>举个例子

比如说你买了阿里云，阿里云上面有个东西叫监控面板，成功的代替了这个玩意儿，但是出问题死机还是得死，最离谱的就是在阿里云的服务器里你啥都没干，安安静静的放着，结果某天三更半夜CPU突然跑上去然后服务器死掉了，第二天找到客服沟通，沟通了半天，客服给你回复说“亲，我给你换台服务器好了。”刚换没几天，那个服务器的用户又塞满了结果又死掉了，你又得联系客服换服务器，最后你去投诉了三次，阿里云直接把你迁移到一台稳定的服务器上面，终于不出问题了。</pre>
</div>
</div>
<div class="paragraph">
<p>所以这个问题就在于自己对自己所拥有的资产不清楚，到现在为止，大家都没有意识到这个严重的问题，这可不是说CPU跑了多少，那可是用户访问你网页访了多少？他产生了多少个查询？你都不清楚。</p>
</div>
</div>
<div class="sect3">
<h4 id="_补充为什么程序员的工资比传统行业高">3.3.8. 补充：为什么程序员的工资比传统行业高</h4>
<div class="paragraph">
<p>那我们现在要做个东西他并不是一个完整的监控系统，我打个比方，为什么程序员的工资比传统行业高吗？</p>
</div>
<div class="paragraph">
<p>设想一下工人在工地上扎钢筋，每天扎多少个灌水泥的小笼子，还有一根一根的钢筋，一根多少钱？但是老板是不是大概知道一个人一天能扎多少多少根吧，所以他请个小工，给他五块钱，计件，你在服装厂上班，在店富士康上班，也是计件，那么计件就意味着工资低，为什么吗？计件意味着你的工作和你的价值是可以量化的，当一个人的价值可以量化过后，那么资本家可以资本家可以剥削任何人，但是当你的劳动价值是明码标价，那就会被砍价。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

老板就知道行情价五块钱一根，但老板可能出四块五但还是有人做，所以他是可以砍价的，但是找个程序员帮你做个软件，你也不知道他的标价是多少，你就问他，你们一般做这个多少钱的？程序员心想：“正常来说我要花三个月，但是我不能报低了给他砍价，所以他心里面想的是4万但是给老板说的8万，然后老板心想，我得还价，但是老板发现还了价后对方就不理他了，第二次老板学乖了，他就不还价了，他就会说：“你这开发要多久啊”。那么如果老板砍价成功，那么将面临个第二个致命问题，老板砍价是砍爽了但是要求的功能，程序员也砍的可爽了,这就叫“上有政策，下有对策，我看需求”如果老板不砍需求还要原价，程序员就想“老板的给5万又不能砍需求怎么办？”缩水呀！任何异常都不管，</pre>
</div>
</div>
<div class="paragraph">
<p>所以说在计算机领域是生产力说了算，可不是甲方说了算，但凡甲方说了算的计算机项目，他已经被明码标价，已经被定价了。这个钱摆在那你这爱要不要，就比如说政府的项目，但是除了这种甲方强势的项目以外，你到自由市场上，你找个程序员给你开发500块钱的系统，对方骂你是傻子，就是因为不能被定价，所以程序员工资高，创新能力是一方面，它有科技含含量，最重要的原因就是不能定价，一旦程序员的工作能够被定价过后，就能批量的从学校培养，直接进企业上班写代码，对日外包就是怎么回事，但是那种模式有严重的问题，什么问题？创新能力严重低下，他不符合这个行业的价值观和驱动能力，为什么这个行业是一直在创新的？而这种定价和计件的方式，他只能解决已有的问题，但是这个行业已经经过了20年的发展已经有了翻天覆地的变化，日本的那一套已经被严重的抛弃了，理论也过时了，那么这个时候，还要用这种方式去打通其他的方式来做定价这种？也要考虑一个问题：“他多久能够过会过时？”那么 <code>程序员的工资高，很很大一部分是因为它的生产力不能被定价.</code></p>
</div>
<div class="paragraph">
<p>而现在老板面临手的问题就是：“虽然我不不需要定程序员的价格，但是老板要知道程序员做出来的系统到底产生了多少的交货、查询、带宽或者是花费的时间，因为这样就意味着老板可以对系统的算力量进行定价和标定。”</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

服务器上的是一个1Ghz的CPU，那么按我之前监控的数据来看的话，在1Ghz的CPU上，我的系统去跑最高的话大概能够同时跑到100个人，这样的话，他就能大概预估，那么如果我把CPU加到2Ghz ，那现在我的系统至少能够跑100-150个人，具体多少可以去测试，可以再观察一段时间，然后就发现，1Ghz的时候是100个人，2Ghz是120人，4Ghz的时候是150人，</pre>
</div>
</div>
<div class="paragraph">
<p>所以他是能够通过观察得到一个数据，但是这个玩意并不能用数学算，因为太复杂了，里面包括的变量太多了，数学里要做的事情是可控变量，</p>
</div>
<div class="listingblock">
<div class="content">
<pre>举个例子：如果a+b=c，a和b的变量一直在变，请问怎么知道c的值，所以数学里面最重要的一点就是控制变量，要先把其中一个变量控制下来，所以数学里经常看见“假定a=1，那么b=偶数。请问c有多少种可能性？”</pre>
</div>
</div>
<div class="paragraph">
<p>看到没数学它在控制变量，但是在服务器领域或软件领域里，最大的问题就是它不能控制变量，虽然他是不能用数学算的，他太复杂了，可变因素太多了，所以要经过测试。但是有多少人访问，这个是肉眼就可以看出来的，所以在运营里面最大的一个问题就是不能对系统算力进行标定啊。</p>
</div>
<div class="paragraph">
<p>那么还有问题，第一个问题，企业不知道自己究竟可以承担多少访问量，</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方
老板现在知道在50个并发量的时候会出问题，那么要怎样全靠程序员去自觉排查代码，按行话来说，叫走代码，走代码的意思就是打开你的IDEA，然后从程序员个人觉得，举个例子，访问A的登录API时候出了问题，你就会打开IDEA，然后找到Spring Boot的Controller找到登录接口，从登录接口那个代码一直往下看。然后猜哪里出问题了，这个是全凭经验的，比如说你这地方的查询是不是太太慢了？然后你去测试，测试完后，发布个新版，然后你同事在管这个服务器，你就对他说：“发了个新版，我Jar包发给你了，你重新测一下”结果他弄了半天还是对你说：“哎，还是不行。”这样一来一回来个十次，你两个疯了，为什么？效率太低，而且老板这时候直接冒出来说：“什么时候能解决呀？”</pre>
</div>
</div>
<div class="paragraph">
<p>比如说最经典的就是发生在我小伙伴身上的事情，他在一个外企工作，大概是5:30交给他个任务，然后六点就问：“做完没有啊？”这种情况我们一般用智障的眼神看着的leader，刚刚我们才讨论完需求，那么快啊。然后Leader就说：“那辛苦一下你们，今天晚上加个班做完好不好？”然后你心里骂娘都有了，但是一想哎呀，我靠。还是钱香，所以这个时候你就被逼的去996了啊。</p>
</div>
</div>
<div class="sect3">
<h4 id="_起步阶段的会遇见的问题">3.3.9. 起步阶段的会遇见的问题</h4>
<div class="literalblock">
<div class="content">
<pre> `1.程序可以支撑多少并发量的认知`
这种认知是需要时间的教育的，没有时间去真正的承受这种访问，你是不知道的，所以在运营状态里头第一个问题就缺少偏后置的一些阶段，但病发量它是一个很大的概念。</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方：

在京东上买东西需要多少个步骤啊？

1.你首先得打开京东

2.浏览网页浏览商品

3.找到一个想要的商品点的购物车

4.下订单

5.选地址

6.选择送货时间

7.选择支付方式，

8.提交订单

9.去支付。</pre>
</div>
</div>
<div class="paragraph">
<p>可以看到有这么多的过程，那么并发发生在哪一个地方？
下单有下单的并发，访问有访问的并发,这样就存在一个问题，因素太多(软件因素/流通节点)。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`2.流通节点太多`</pre>
</div>
</div>
<div class="paragraph">
<p>流通节点太多就有个致命的问题： <code>知之甚少</code>。</p>
</div>
<div class="paragraph">
<p>如果纯网页浏览的话，Nginx会产生日志，那现在你要想知道 <code>Mybatis到底查了几个东西？</code>  <code>Mybatis哪个地方卡了呀？</code> 你说我在Mysql上打开慢查询就知道了，这样是没问题，但关键是本身就已经是后置了，访问入口在最前面，Mysql在最后面，然后你在最后面那个软件装了个监控器，那中间呢怎么办，当然这样是能解决输入输出的问题，但是后面的数据库不是你能上你就能上的，数据库是一个企业最核心的资产，它不会让随便让你上去弄，一不小心删库怎么办。</p>
</div>
<div class="paragraph">
<p>前段时间抖音一个实习生把那个训练模型给删了，最关键是那个模型还不是试验的还是生产的，更早一点，网易的程序员也不靠谱，把数据库密码传到了网上，而且那个他那个账号密码也是是生产的，不是测试的。</p>
</div>
<div class="paragraph">
<p>所以让不可靠的人进入生产系统过后，会发生一系列安全隐患，根本不可能让不靠谱的人去排查Mysql的慢查询。</p>
</div>
<div class="paragraph">
<p>如果真的让不靠谱的了去排查Mysql，然后他看到Mysql超CPU8%，看起来是Mysql有问题，那他直接先重启下Mysql，结果一重启十个子系统全部宕机，本身就两个子系统宕机，结果一重启Mysql全部系统全宕机，然后在重启期间所有的新发生的请求又一直涌向Mysql卡在那，结果刚刚起来的Mysql还没热身呢，又挂了，CPU堵车的时候是真堵车，不是慢慢堵车，会发生一系列很可怕的事情。</p>
</div>
<div class="paragraph">
<p>起步阶段会存在很多数据流通节点，一旦软件数据流通节点太多，就存在管理问题，这就是起步阶段会遇到的问题。</p>
</div>
</div>
<div class="sect3">
<h4 id="_项目后期会遇见的问题">3.3.10. 项目后期会遇见的问题</h4>
<div class="paragraph">
<p>到了后期，主要是对软件进行优化，怎么优化？ <code>提升并发</code>,但是企业并不会主动去提升并发的，因为没有出问题，企业就认为不出问题的机器就是好机器，他也就不会管，所以这个时候企业不主动优化，那就意味的所有优化暴露出来的问题都是Bug，就是 <code>性能方面的Bug</code>,一旦出现性能方面的Bug,一般企业是没有能力解决的，不要说现在云技术那么发达，人才那么多，你放心，他连人都找不到。</p>
</div>
<div class="paragraph">
<p>曾经我有一个同事的一个下属，他们公司以前的项目就是因为性能太差，被政府给踢出来了，他们开发了一个林业的管理系统， 就是森林防火的那种系统，结果三天两头系统打不开，为什么打不开，因为访问的人有点多，有多少呢，大概十个，搞了一年多，搞不定然后甲方终止合作，公司就垮了，后面又花了一天时间，成功支持11个了，老板欢心鼓舞，但关键是到第十个时候还是死机。</p>
</div>
<div class="paragraph">
<p>所以在项目后期还存在个问题：优化性能Bug，这个问题可以很快很好的解决，不过要花很大的代价，比如说程序员告诉老板：“这个2万的服务器不行，我们要买20万的服务器。”那确实优化好了，钱不是问题就能很好的解决，但是我们作为一个高薪行业，要有自己的职业素养，能花2万解决的问题最多花3万，花20万就离谱了，当然不说老板不老板的问题，光从社会效益上来说，程序员是尽量少花钱，大家心里都有一个认知的，就是 <code>在有限的场景下面去解决问题</code>，这样程序员是非常有成就感的，但是并不妨碍这个行业里还是有落后者，那落后者就说：“我只要够富裕，加钱就可以了。”加钱能解决的问题还要你，淘宝如果花510亿能买，你买一个淘宝多好啊，你能买到淘宝吗？你买不到，关键出性能Bug的时候，你可能买了新的服务器可还是一样的慢，这是最离谱的，所以说钱不一定能解决问题，因为你根本就不清楚问题出在哪，可能问题就是电信机房给你现在十兆带宽，你带宽跑满了，有这种可能对吧，所以存在诸多的问题。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_提出问题技术">3.4. 提出问题(技术)</h3>
<div class="sect3">
<h4 id="_怎样了解模块间的调用关系">3.4.1. 怎样了解模块间的调用关系？</h4>
<div class="paragraph">
<p>并发量是对软件系统整体效率的度量标准。（结果，颗粒度更细）</p>
</div>
<div class="paragraph">
<p>软件数据流通节点太多，管理存在问题。</p>
</div>
<div class="paragraph">
<p>如：用户登录，在登录界面上，用户输入用户名和密码，再点击登录（这个时候都是在人机交互界面发生关系），点完登录过后服务器去查询你的用户名是否存在，用户名如果存在会去判断这个用户预设的密码和你填写的密码是不是相等的，如果相等，提示，返回，返回一个ture，提示登录成功，如果不相等，提示返回密码错误，那就有以下几个节点：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>点登录发送了一个POST请求，POST请求到了服务器上面。</p>
</li>
<li>
<p>你的Java代码收到了之后要做协议的解包，解码，然后协议就把用户的帐号跟密码拿出来，拿出来过后要通过数据库去查询这个用户名对应的密码。</p>
</li>
<li>
<p>查询完了之后要进行对比。</p>
</li>
<li>
<p>对比完了之后要输出结果。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>就一个登录放到数据流通节点那里就会发生很多次这种事情，但是最重要的几个点就是：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>用户发送请求。</p>
</li>
<li>
<p>发起请求到最后密码对比结果结束，对比结束之后的结果ture或者false。</p>
</li>
<li>
<p>查询语句</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>发起请求跟结果对比是同一个层次的，查询语句是一个层次，都很重要。</p>
</div>
<div class="paragraph">
<p>（模块间交互）
项目后期优化（被动），性能Bug。</p>
</div>
</div>
<div class="sect3">
<h4 id="_模块内的工作状态是怎样的">3.4.2. 模块内的工作状态是怎样的？</h4>
<div class="paragraph">
<p>如：查Mysql，正常来说，在本机上查询只需要1毫秒，但是上了生产过后一开始是1毫秒然后是5毫秒最后变成4秒，这个秒就需要管控，这是第一个问题，第二个问题：查询这个东西很细，有可能是有很多个查询组合的最终你要想客户端反映一个登录结果，你点了登录，卡了五分钟，那就要对请求响应时间做管控，要记录响应时间，记录响应时间是基于一个点来记录的，要么那个响应时间在nginx内部，你监控nginx日志，他请求和响应是有个日志可以打出来的，还有个方式就是在Controller进来的时候getting start，那么出去的时候end，这个时候就可以有个计时器记录时间，在你代码的开始入口和出口之间写个计时器去监控他，所以可以对响应时间做控制，更精细一点，你可以查每一个查询的返回时间。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_解决问题设计">3.5. 解决问题(设计)</h3>
<div class="sect3">
<h4 id="_管控模块间的交互">3.5.1. 管控模块间的交互</h4>

</div>
<div class="sect3">
<h4 id="_模块内的工作时长输入参数输出结果数量等等">3.5.2. 模块内的工作时长（输入参数，输出结果数量等等）</h4>
<div class="paragraph">
<p>如：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SQL查询时间</p>
</li>
<li>
<p>HTTP的响应时间</p>
</li>
<li>
<p>调用地图API的时间</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>用户：程序员，System admin（系统管理员）</p>
</div>
<div class="paragraph">
<p>使用：通过 yaml包或者pacman装一个软件，先把我们这个软件跑起来，装完了会有一个Web界面，比如说zabbix,这个东西装完了过后会有个网页，网页有CTO的使用率，有内存，还有网络和其他的东西，但是这个解决不了模块间交互的关系，还有一个东西Istio就是Googel给k8s开发的，这个东西是用在k8s领域的，k8s里面有很多模块，那模块内怎么通信，怎么死掉的或者状态怎么样是通过一些监控去监控k8s死没死掉，如果死掉了他会有一个记录，然后你可以自定义一下策略，当他死掉之后做拉起或者重新新建一个镜像让他启动起来，这个样子之后当你的app服务器死掉之后经过几秒钟检测之后再给你启动一个，就又活了，除了这个他还有一些收集信息的能力，还有一类就是定制，给自己开发一个，一般写的时候是根自己有关系，在英文里面，在linux领域我们一般吧调优这种东西叫profile，这个东西很多时候会在代码里面镶嵌很多东西，镶嵌完了过后会把你的调用堆栈，就比如说你调用了有一个进程，进程有依赖了什么东西，他把那个函数的调用关系全部打印出来了，最后就点那个加号减号就行了（点了加号就会把下面都展开，它可能就会有很多调用），这一类就是linux上面有现成的命令，在你运行这个命令的前面先运行profile，运行完了就会生成一个分析文件，那个分析文件里面就会有函数的调用关系，每个函数花了多少时间，我们优化c或者c + + 程序就是这么干的，这种优化已经是从操作系统的调用层面叫System call，这个叫系统调用，就是通过系统内核和你产生交互，然后把你的规则跟数据收集出来，最终你就能看到某个函数在那里转圈圈，一直在调用，每一次占0.1秒，运行了一万次，你是能看出来的，但是有个问题，如果按这种方式首先你的程序必须是c或者c + + 写的，java就不要想了，因为你去看java的话就只能看到jvm的东西，看不到 user层的，因为jvm和系统发生关系，而你和java发生关系，中间隔了一层，所以只有纯静态语言才能调这个，比如说Rust。
这是三种我认知里面的方式，那么第一种zabbix就是通用领域里面收集系统信息， 而且收集信息是很有限的，当然你可以写插件去监控某些特殊的东西。然后第二类Istio他是集中在k8s这个生态里面的，这个非常非常有限，因为我可以完全不用k8s,虽然k8s对你来说这几年有用，但是你咋知道五年过k8s他不过时呢。第三类profile就是太底层了，1w个程序员里面顶多一个人在用这个，我都是高估了这个，所以在成都市，在对面那么多栋大楼里面找到一个都是不大可能的事情，凤毛麟角的，这个也不是因为它没用，而是因为它太底层了,太底层就意味着现在的程序员大多叫Web程序员，他们是搞不清次这个东西的，但是按常理来说，你如果是一个计算机工程师，我认为这种程序调优是必备的技能，但是你如果只是为了吃饭，只是为了生存你肯定不会在意这些东西，虽然我不知道怎么去设计，但是我知道市面上有这么几种东西，我个人觉得我们做的东西可能和第二类Istio差不多， 和第三类profile相比起来，如果你要通过编码去控制他的交互，我个人觉得那样对代码的侵入太大了，我打个比方：</p>
</div>
<div class="paragraph">
<p>某个公司用java开发了一套东西。然后后面发现老宕机，你告诉他你也用我这个东西，在你代码里面加入某些东西就可以怎么样了。但是用户他就不愿意动，为什么？我代码通过了安全审计，好不容易甲方认可上线呢？你这么一改，我要用要跑的用户去发版本，还要经过代码审计一系列复杂的事情，侵入太大了。那这种轻松的话万一你是个病毒呢？万一你又坏心思了，所以这种侵入性太大了，当然他的运行方式是在命令前面加一个东西，但是java，这种你是没有办法通过这种纯调用，所以你必须=侵入代码里面去统计它的函数使用对吧？那就很麻烦了，你这样侵入代码里面统计你为啥不开发个jvm的统计工具，直接统计都完了完事对吧。层次太低了，就和profile一样的，你统计到jvm里面去有几个人搞得懂啊。就是我们有一个广度，就是你的适应性要广，而且侵入还要小，所以看起来纯profile这种方式不行的。所以看起来的话首先总结特点:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>普遍性（适应性）：我们这东西不是很特殊，不能只能用了某一个细分的领域。我们用到应该是感受和程序相关的，至少都能有一些作用。（普遍性第一个是指的人，第二个指的是物）</p>
</li>
<li>
<p>无侵入性：这个无就是少的意思嘛，最好是无，就是更可能少的侵入性。</p>
</li>
<li>
<p>更灵活、扩展性：要适应变化，要能写插件，应该是一个平台，一个数据容器。</p>
</li>
<li>
<p>覆盖关键路径：在关键领域把握要点。</p>
</li>
<li>
<p>性能热点：性能热点就比如一个系统一共花了5秒钟去响应用户的某个动作，在这个动作5秒里面有个查询占了3秒就是性能热点。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>以上五点是最重要的！</p>
</div>
<div class="paragraph">
<p>因为你的程序卡顿，不管你是走代码还是你去测试也好，你就不能一眼看出问题在那里，就术语盲人摸象，然后这个时候程序员需要一个东西去辅助他解这种问题，不是还有一个大的嘛，就是企业里面，你应该对你系统的运行状态去了解，他应该是先有状态的本身的收集。收集完了过后在某些地方他看到有异常的数据，他应该是这样就发现的，所以最终程序员装了我们的的东西过后，把数据收集上来过后能看到异常，现在就有两个问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>怎么把数据收集上来？</p>
</li>
<li>
<p>收集什么样的数据？</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_整体数据逻辑设计">3.6. 整体数据逻辑设计</h3>
<div class="sect3">
<h4 id="_架构图">3.6.1. 架构图</h4>
<div class="imageblock">
<div class="content">
<img src="images/项目设计.jpg" alt="项目设计">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_怎样收集数据应该收集哪些数据">3.6.2. 怎样收集数据？应该收集哪些数据？</h4>
<div class="paragraph">
<p>在不侵入的情况下哪些数据应该是收集的？我们就先写出数据特征，一项项列出来。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>传统的东西比如：

CPU

内存

硬盘

UpTime（系统运行时间）</pre>
</div>
</div>
<div class="paragraph">
<p>除了这些以外，还有最重要的一点：网络，网络是很笼统的概念，那就得区分，那网络区分那就有：  <code>HTTP的请求,MySQL、Redis、Kafaka</code>，还有文件IO，但他不属于网络，本来他应该属于常见的硬盘里面，但是那里的硬盘是负责硬盘的大小，所以这个地方应该还有 <code>FileSystem(文件系统)</code>，那么FileSystem里应该有 <code>R/W IO</code>，IOPS应该是属于上面硬盘的，因为IOPS是硬盘里面的，而R/W IO是涉及到 <code>文件读写`的，文件读写和机械是不一样的， `IOPS是机械的限制，R/W IO则是软件层面的限制</code>，因为FileSystem这个地方涉及到NTFS和ext4。</p>
</div>
<div class="paragraph">
<p>那现在假设个场景，假设查询慢，那么有几种方法能够采集到MySQL查询？写一个Mybetis PlusPlus，然后在里面加一个代码，那个代码就是我写的Class，凡是用我的框架，就能自动把那个数据采集上来，那这就是意味着我对代码具有侵入性了，用户必须用我的代码，用户不把我的软件包的代码引入到项目里面，就采集不了MySQL，还有Redis，你也写一个Jdis PlusPlus，那工作量就可大了，然后Kafaka，他是通过用Zookeper请求的。</p>
</div>
<div class="paragraph">
<p>再假设一个场景，用户他不懂任何Linux的操作，那他只需要根据我们的软件，去看每一个SQL的执行效率，然后我们按SQL的响应时长排序，时间越长的排的越靠前，那用户是不是能很快就能查出问题，还有连接池，这样的话用户就能看到同时有多少个连接。</p>
</div>
<div class="paragraph">
<p>那像 `文件读写`呢,Linux内核提供的接口，是可以去读写的，就是监控某个指定的目录，Linux就是这么高级，Windows其实也有，但是是靠技巧去做的，但是在Linux内核就自带了，你可以用info这个命令,带上参数 -w指定Watch模式，加上目录，就能监听目录的读写、删除、修改，比如说木马，他是要创建文件的，我有段时间那个服务器老是被改文件，但是我又不知道什么时候上来的，日志太多，然后就把那个网站目录做成监听模式，只要Create文件，I Know，所以说就去把木马立项到日志文件里面，第二天只要看到有那个文件就翻日志，就可以看到是什么时候创建的，而且还能看到是什么时间访问的。</p>
</div>
<div class="paragraph">
<p>除了这些以外，内存的分配不需要考虑，因为内存一般指大小就可以了，cpu通用时长也不重要，那么一般出问题就是NetWork那一块，因为一般取数据、文件IO一般都是和应用直接挂钩的，那么现在他是延伸一下，提出一个问题：HTTPS怎么办？</p>
</div>
<div class="paragraph">
<p>首先，假设要加密的数据，如果要让我监控的话，就应该在平台上面把MySQL或者Radies配的证书给我，你把你配的证书给我过后我对的，或者我们最开始就不考虑那些问题？要知道我们的软件是有延展性的</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

用户发起了一个高德地图的请求，那在NetWokr这个地方除了常见的以外，可能还要针对TCP连接单独去处理，因为加密的不都是TCP连接，那你就知道项目里是谁发起的连接，哪个连接耗时多久，又等于说这些就是PCB下面应用层，等于说TCP应该是大的层次，而左边一般都是小的，所以整个连接中，你应该是一个连接管理的地方，连接耗时了多久？应该把它列出来，然后HTTPS加密的话，可以把证书配给我，证书配给我的话，你通信过程当中。我就可以解，MySQL也是配证书，Readish好像也是，他们基本上都是差不多的，只要解了一个，剩下都可以，说白了：

“你加了密的我就监控不了吗？”</pre>
</div>
</div>
<hr>
<div class="listingblock">
<div class="content">
<pre>再打个比方

用户让我监听某个端口的TCP通信，那肯定得告诉我端口，不可能把所有网卡全部监听一遍，那数量得多大呀？所以这个时候比如用户的8080都出问题了，你应该让我看8080那个没有加密的，不应该让我看Nginx之外的，只要在Nginx后面的就不存在加密的问题，而且大多数MySQL大家都不会用加密的，你本地都要调用，所以很少有人去加密，所以加密问题应该不是最优先的，因为总可以看不加密的，然后还有TCP那个，可以看它连接的时长，你能统计出来的，就是一个连接过来直到连接断开？从端口开始到结束一共花了多长时间你给记下来，然后写个MySQL协议解析器，Redis也要写，HTTP好弄,现成的有很多，然后MySQL也有，所以就看我们把他们怎么结合在一起，但是MySQL个有个问题：不同的版本，协议形式不一样。所以我们可能支持常用的5.7,8.0,那么这就是版本支持问题，那个最老的5.5，你可能想都不想支持，Redis相对比较简单，因为它的协议就简单，然后Kafaka的话，也不难，所以说白了，你做完这些过后，你比那个Kafaka官方的人还了解Kafaka。</pre>
</div>
</div>
<div class="paragraph">
<p>所以我们的工作量应该主要在NetWork那一块，难度和工作量在那块非常集中。所以这个地方很明显就是插件，肯定优先支持HTTP，然后就是文件IO，文件IO有现成的内核模块，直接用，因为这个东西肯定和性能有关系，肯定不会用Python来做，那文件IO这块是调用内核模块，内核模块里面有各种标志。可以用C/C++，如果rust可以的话，尽量用Rust，因为我希望这个项目有后来者参加，用C的话可能没有人维护，所以我们大概清楚要怎么做了。</p>
</div>
<div class="paragraph">
<p>那么这样做的话，首先：</p>
</div>
<div class="paragraph">
<p>1.对人的要求就很低，只需要在网页上配置一下。</p>
</div>
<div class="paragraph">
<p>2.普遍性：都已经做成这个样子了，已经关心网络还有底层的基础设施，那么物体肯定也是适配的。</p>
</div>
<div class="paragraph">
<p>3.无侵入性：我们做的就相当于把你网络流量Copy了一份，这样看起来像把罗番那个科来公司的事情全部重新干了一遍。</p>
</div>
<div class="paragraph">
<p>4.灵活和扩展性：我们因为扩展的是协议嘛，这就是一个模块嘛，一个Mojo，那么就相当于是一个个做扩展。</p>
</div>
<div class="paragraph">
<p>5.关键路径：网卡，性能热点可以通过观察它的时长。</p>
</div>
<div class="paragraph">
<p>当然，如果一个应用，全部东西写在一起，没有前后端分离，你只存在查数据库这种，那你就只和外界查数据库有交互，那这种我们就帮不上了，为什么？因为你所有东西耦合在一起，你都没有模块，我想一下那种我们能覆盖到哪种范围，首先查数据库或者Redis都是可以的，还有我们的客户应该是现代的，不会出现前后端耦合，都是前后端分离，至少分成模块了，还有微服务，差不多覆盖住这一个就行了。</p>
</div>
<div class="paragraph">
<p>那现在回过头来想这个项目有没有意义。</p>
</div>
<div class="paragraph">
<p>因为我们最开始肯定先考虑的项目背景、可行性，虽然之前简单聊了一下，那现在我们要确定一个事情： `“这个事情做下来到底能不能解决客户的问题，或者他的问题值不值得解决？”`如果客户的系统不出问题的时候，通过我们的软件能不能让更有意义一些，比如说用户没有问题的时候用这个东西，他可以看到，每一次SQL要花多长时间，如果时间过长的话就可以针对他进行一个优化，还有比如说软件测试的同事啊，他要去做测试。他虽然看不懂代码，但他可以看有没有发起请求，这是一个对于软件测试的，对程序员来说的话就是刚刚说的MySQL开发、请求，比如说可以排查哪哪会不会出问题，对系统管理员来说呢？那这个地方能不能解决客户要知道有多少并发的问题？那也是可以的，就直接看流量入口进来的数量，然后对于运维，我们可以做插件的话，类似于刚才说百度？？的统计页面，比如说是哪个IP来的、用的什么浏览器、哪个端口、哪个URL，对老板来说，老板肯定是让下面的人去做；对项目经理来说，他从代码层面来说，他是不懂这个项目的，但他看了这个我们的页面之后，他知道哪里可能花的时间很久，从Team leader来说的话，他就可以让程序员的工作量化了，对运营来说，就和老板差不多，运营关心的是指标，他就看那个承载量，这些看起来都是ok的，目的达到了。</p>
</div>
<div class="paragraph">
<p>那现在是采集的类别收集到了。那现在考虑个问题，我采集过后看起来这个地方应该运行个程序，那么这个程序我们一般叫Agent，你可以翻译成代理(客户端代理)，他就运行在每一个用户的操作系统上面的，比如阿里云，他就是在他的机器上装的这个玩意儿，不然他怎么控制你重启的,他可以断电重启，但是用户说我要温柔的重启，他就必须通过Agent控制你的系统,那上面讲的就是Agent，那么肯定这些数据有需要一个接收的服务器。</p>
</div>
<div class="paragraph">
<p>那从Agent到Server肯定是基于tcp的，但是为了让软件更具扩展性，我们应该知道TCP下面有哪种协议？假如我们自己造了套协议在TCP上面，现在要考虑个问题：为什么？要通过协议去造一个通信协议。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

造了个通信协议，让别人去维护，那他肯定不会。</pre>
</div>
</div>
<div class="paragraph">
<p>所以这个肯定更加倾向于HTTP+JSON，它们更通用更快，说白了界面酷炫。然后Agent里的东西都看起来现代，所以就有人会去用，哪怕是为了装酷，那我们就会用基于HTTP+JSON的方式来传输数据，但是地方有个问题：传输的速度可能会非常快，想一下嘛，Agent一定会要把协议分析一下，把数据分析出来，再传出去的，运计算量肯定不会放到服务端去计算的，所以你肯定是在每台机器上做边缘计算，所以这个地方肯定丢的是SQL本身，还有他的响应时间，看起来通信协议是靠HTTP+JSON，传输平次就是Agent只要有变化就会去推，比如说Agent里HTTP的包很多，那就会一直产生单独的HTTP的包往外面推，性能不是现在要考虑的问题，这个地方实际上是对性能不敏感，因为服务器你大不了一边100E 次嘛。这也是100E次,实在不行的话，你可以把Agent缓存一会再打包丢吗，你是可以通过策略降频的，你不一定来一个就推一个，可以一分钟推一下嘛，但是要存到内存里面，那么Server既然是接收服务器，它是HTTP的，那这样看起来要接收HTTP，而且要和Agent配合，先讲下一个和数据库发生关系的模块，我们这些数据，它首先量不大等于说存储这边我们用Post，还需要统计就是ELK，用来做简单的统计分析，他启动起来，其实你数据越多也大吧，但是我们Agent已经统计完了，相对来说，它是数量是固定的；所以说暂时就是一个纯持久化存储的，然后一个用ELK，为什么用PSQL？因为它有很多非常非常好的特性，比如说，可以做实时数据，MySQL都不行，因为那个MySQL是学院派开发的，就是那些典型的大学开发的。至于是用对象关系性存储，还是用持续存储，这个看需求，到时大不了把特性打开就可以了，然后ES主要是用来做复杂的分析，判断，排序，那差不多就这些，然后Server接收啊，Store存储，那应该还有个WebServer，那么Web的话肯定就用Spring Boot，前端的话我建议用react，你写。为什么用React？因为它复杂，Vue就是简单，那简单的东西，我们都会，就要玩一会复杂的，因为Vue和React他们在里面都差不多，你会React了，看Vue就一天的时间。</p>
</div>
<div class="paragraph">
<p>从Web—Store—Server—Agent都有各种控制策略，所以分开是可以的。先确定建设设计方案，首先Agent，肯定不能用Java，因为性能太差了，而且内存消耗贼多，我们希望控制住内存，为什么？因为用户的的客户机可能内存只有几百兆，比如说，你要求用户内存至少512MB以上，然后自己就占了人家一半的内存，所以这个地方偏向于Rust或者是C++都可以，这是没问题的。然后Agent和Server之间，是用HTTP出来的，出来过后到Server有些策略控制，那这种策略控制有哪些？</p>
</div>
<div class="paragraph">
<p>补充之前PSQL和ELK中还需要有消息队列RabbitMQ，那首先这个地方消息对列那这个地方的话。因为他是rust，总是为了内存，这个server和他是跑在一起的，那么Server和Web都可以使用Java。</p>
</div>
<div class="paragraph">
<p>现在我们就设计出了就是大致的逻辑，那我们再复述一遍。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>首先这个软件

1.要对人的要求要低，他最好用可视界面，能够做设置、查看，以及对监听目标的适应性更广，比如说只要Linux都可以。

2.无侵入性，我们是通过监听基础设施，然后就实现了无侵入性。

3.灵活扩展性，说白了，基础之外实现的功能都是加工的模块。

4.关键路径覆盖，主要因为都是基础设施，所以已经覆盖了。

5.性能热点，统计状态然后进行了排序，然后如果客户真的要找热点，可以让他去做个设置，就比如说设置个预值，SQL超过三秒就标红。</pre>
</div>
</div>
<div class="paragraph">
<p>现在看来通用领域的监控我们都得有，那么Agent你的NetWork块是有挑战难度的，比如说MySQL，要去写一个协议解析，官方有，但是官方他是有版本支持还要各种裁剪，所以有适配问题，他有各种各样的版本，那我们可能要最低支持5.7,8.0再说,然后Redis相对比较简单一些，然后Kafaka的报文也比较简单；然后文件IO这个地方是比较固定，是内核的东西，几百年都没有变过的。</p>
</div>
<div class="paragraph">
<p>那么技术难度主要就是MySQL，HTTP很多现成的，没什么大难度，把报文拿出来解析个报文，就算手写都把它写出来；那么Agent我们就采用rust或者C + ，要知道，做这个东西要有延展性，C+用户越来越少，越来越贵；Rust虽然也贵啊，但是他相对来说没有那么多糟心的事，也就语法严格，要在safe模式下面去工作。那这样的话如果有新人来维护的时候，那么肯定他维护的是这样的，新增了一个功能点，报上Server，Server内部应该不用大动，为什么？因为你新增功能点应该是加了Compent的结构，那么Server和Web都是Java，所以的话难度应该在Agent下的NetWork，所以对开发者的要求来说，难度会大一些。</p>
</div>
<div class="paragraph">
<p>现在在说大的这样做到底有没有意义？这样会不会是重复造轮子？
现在市场上没有这种东西，因为我们是针对企业的问题来提的，老板或者Leeder他们要的是一个完整的解决方案，他要的不是说我知道某个工具能解决。</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_XMSZ2_chapter">4. 项目实战(二)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_板书_4">4.1. 板书</h3>
<div class="imageblock">
<div class="content">
<img src="images/板书.jpg" alt="板书">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_前言_4">4.2. 前言</h3>
<div class="paragraph">
<p>上面我们讲到解决方案，我们当时涉及到说有Web界面，上报数据的服务器，Agent客户端，大概是三种，然后Agent客户端的话，当时心想的可能用Rust/C++/C/Python，就是还没有确定，那么Web端或者服务端，因为是Web程序，所以说用Java写是ok的。</p>
</div>
<div class="paragraph">
<p>那今天的话我们就先考虑一个问题：客户端的问题。</p>
</div>
</div>
<div class="sect2">
<h3 id="_客户端的问题">4.3. 客户端的问题</h3>
<div class="paragraph">
<p>客户端肯定是用来上报数据的，如果网络托普是这样的话：</p>
</div>
<div class="paragraph">
<p>客户端收集信息，收集完了后通过网络协议报给服务器。</p>
</div>
<div class="paragraph">
<p>那现在我们讨论客户端里面的东西，首先常见的客户端，像Zabbix、Cacti或者是Nagios，他们都有不同的方式，比如：阿里云，大家都用过，但可能没有注意，它客户机里面有个叫Aliyun.service，那个东西就是客户端。</p>
</div>
<div class="paragraph">
<p>那客户端他干了什么？</p>
</div>
<div class="paragraph">
<p>收集cpu、内存，执行重启、关机、睡眠等等操作，除了以外，他还要检测你系统上有没有安全隐患，像那天我尝试把Aliyun.service给删了，马上就在控制台上显示说的“有人试图删除我自己，”请你注意，后面我就奇为什么删不掉，然后我就花了接近半个多小时去分析他具体是怎么防删除的，后面发现它是supersuper管理员，然而你就是一个普通用户，那你就删不掉他的系统，也不能干掉它,这个就很国情，要是放在亚马逊上，你这么做会被别人吐口水淹死了，为什么？ `因为你侵犯了我的隐私。`在国外这一点最重要就是你产品可以不，就算你体验不、使用很难，但我可以学，你写个教程给我学，学完了过后我自己弄，但是请你不能干涉我的系统，而国内是这样的：哎呀，我害怕你出错，害怕你删掉了什么东西，就像防傻瓜一样防，这个应该在以前我讲过国情的问题，像国外的话，他们发明了互联网，所以所有的与计算机相关的，都是外国人发明的，就说英语那帮，那么他们的基础素养是很高的，为什么？因为他们素养低的都在那个大街上当流浪汉的，但是总体来说，只要办公室里面穿着得体的人，他们整个综合素质是非常高的，为什么？人少嘛，可以搞精英教育，如果让他变成14亿人，他来搞他还不指定搞成啥样呢，再加上那会儿从清朝抢走那么多白银黄金，那不发展的更，所以你得承认这个差距。</p>
</div>
<div class="paragraph">
<p>那么典型的客户端，肯定在机器上会有一个程序在运行，首先我们得有 <code>守护进程</code>，那么这个进程其实是从Agent过去的，所以说Agent是出口，那么现在有个问题，Agent是出口，我们采集cpu、内存等等应该怎么做？常见的做法是在这个Agent里面写代码，写一个cpu函数，写一个内存函数，然后再写个网络函数，那我问你个问题：做是可以做，但做完了过后系统扩展性在那？在我们的特性中，有一条非常非常关键的特性就是扩展性，因为你不可能把全世界所有用户的需求都囊括在里面，那么就要借助整个社区给你的反馈。</p>
</div>
<div class="paragraph">
<p>那这个时候你就应该留出编程接口让别人来帮你完善，那这时候你说：“强哥，Web界面他不可能帮你完善”，但是改这个东西并不影响Web，Web界面那边完全可以动态呀，那这样看起来Web一点都不重要，其实重要的是客户端，然后这个时候就涉及到一个问题：我可以用rush的一种语言完成所有的事情，但是为什么不选c呀？因为写c的话，内存管理很麻烦。那为什么用Python？</p>
</div>
<div class="paragraph">
<p>其实每一种语言有它的 <code>优劣势</code>，那这个时候就根据用户需求，他愿意怎么弄他就弄，但是你不要把他 `限制`死，比如说有一次我想去改RabbitMQ的这个东西，我觉得他那个整个机制没有解决我的问题，我不知道是我用错了，还是怎么样，那我就尝试去看Agent的代码，结果拉下来一堆C，想去改东西的话，还没文档，还要自己琢磨，然后就放弃了，之后我自己又花了一个月写了个ZSR，才解决我的问题。因为当时有台服务器老被黑，是用户的服务器，但是我也抓不到是谁，我就写了ZSR，把所有的东西都监控起来，每秒钟把整个系统快照一遍，产生的日志文件一天的话大概有两个G，但是他颗粒度非常细，每秒钟，如果想更快的话也可以，但是没有必要，所以我用编程的方式解决我自己最核心的问题，之后我写完了就放在那，不需要去管了，为什么？对于我来说经常是要用到什么我就写什么，但是这样会有个问题，就是说整个技术栈很散，知道的东西也很散，以后想解决更多的问题的时候，要把它们合在一起就很麻烦。</p>
</div>
<div class="paragraph">
<p>所以这个平台也是作为我个人技能的补充，就把我以前理念全部合在一起，做过的，没做过的都可以用上。</p>
</div>
</div>
<div class="sect2">
<h3 id="_扩展性">4.4. 扩展性</h3>
<div class="paragraph">
<p>所以在Agent里，首要的是考虑扩展性，性能是才是第二位，为什么说性能是第二位？你连数据都采集不上来，你咋知道性能有问题。</p>
</div>
<div class="paragraph">
<p>举个例子</p>
</div>
<div class="paragraph">
<p>今天吃晚饭的时候还在和跟同事讨论那个南瓜尖，他说那个南瓜尖很吃，我说那个有毛刺，他说没有，很吃，我说是如果在你家里面，去掐的话，你会掐那个很短很嫩的那个芽，但是你咋知道菜市场的大妈，她掐的那么长的，然后买回来吵着碗里，你不咬一口你咋知道他很老？，这个很实际的例子。
所以我自己不喜欢吃是因为我不确定他老不老，就像我每次问我妈，我说：“那个鸡的屁股你洗干净了吗？”然后我妈说：“吸干净了，没得问题”然后一咬下去，呕，这辈子都都不会再碰那个东西，为什么？心理阴影，你不咬一下，你咋知道他洗干净没有？。</p>
</div>
<div class="paragraph">
<p>所以扩展性是第一位，那我东西都没有装上去，跑起来，就是说都没有见过猪跑，怎么去吃猪肉呢？要吃的明明白白？比如猪的后腿肯定吃，为什么？它天天都在的锻炼，所以扩展性尤为重要，因为你要让他先跑起来。</p>
</div>
<div class="paragraph">
<p>那什么是性能？就是你运行起来的时候不能耗太多的CPU、内存，那如果是客户自己写的，CPU和内存消耗的高，那就和我们没关系，但是我们写的对性能是有要求的，所以说如果你搞不定的话，可以让我们帮你定制。</p>
</div>
<div class="paragraph">
<p>那我们先讨论扩展性的问题，你想你要让客户甚至用JS来写，都能收集东西。你想之前说不限制语言嘛？他用任何语言都可以把这个数据报上去，但是扩展性里还有个隐藏条件，就是要简单，就是我们整个系统能够做的事情，你不能让用户去做，那要做的扩展性，先画个拓扑:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/扩展性拓扑.jpg" alt="扩展性拓扑">
</div>
</div>
<div class="paragraph">
<p>比如说这个是一个cpu的程序啊，这个cpu的程序是用Pyhone写的。还有有个负责内存的，用Shell写的，最后还有一个报文件IO的东西，用Java写的。那这三种他最终应该有统一的行为，那么他们一定会和某个模块发生关系。然后这个模块发生关系过后统一行为再抛出去，但这个时候都还没有脱离本机，还是在自己本机上面，还没有通过网线再出去，所以中间的模块他的职责是什么？Agentd职责又是什么？那Agentd肯定是整个系统的核心，为什么？因为他的任务很重要，为什么前面那么多东西过来过后对于他来说，他要整理、调度，然后再发出去，所以这个时候对于他来说有很多任务啊，但是中间的模块是什么？这个叫动态客户端模块支持，简称DAMS，这个灵感来源是来自内核里面一个概念，叫DKMS，他们两之间A和K他们两个的行为都差不多。那么DAMS的作用是什么？他提供统一的行为接口，这个是编程的编程关系哈，是在模块代码层面，模块之间的关系，并不是运行时的关系。</p>
</div>
</div>
<div class="sect2">
<h3 id="_主程序怎么运行的">4.5. 主程序怎么运行的？</h3>
<div class="paragraph">
<p>举个例子</p>
</div>
<div class="paragraph">
<p>假如有一个cpu模块，首先，你开机肯定要先跑Agentd，因为他是入口，那么在跑他的时候，他会去读配置文件，那么我就把那个运行的时候，整个启动的过程写下来。</p>
</div>
<div class="paragraph">
<p>1.启动Agentd</p>
</div>
<div class="paragraph">
<p>2.检查目录Conf.d下面的配置文件</p>
</div>
<div class="paragraph">
<p>比如说Conf.d下面很多个*.ini配置文件。那么他会去扫描所有的配置文件当他扫描过后，他会把配置文件加载进去。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`那么ini配置文件里应该有什么?`</pre>
</div>
</div>
<div class="paragraph">
<p>首先里面应该有模块的名字，然后他有一个exec可执行程序，这个地方你可以写成什么，比如说top命令，就应该是exec=/sbin/top，就是命令的路径，然后在下面写个type，那么type是什么？就等于每一次运行几次？比如说运行一次，就叫oneshot。那么这就是配置文件里面的东西。</p>
</div>
<div class="paragraph">
<p>3.dans -m cpu start</p>
</div>
<div class="paragraph">
<p>那么他读了配置文件过后，就要在内部就要dans -m cpu start ，因为它在加载的时候，要启动一个线程，启动线程过后，那么这个c我后面就用cpu代替这个模块那第四个。cpu这个模块，他在启动的时候，他要执行top下命令。</p>
</div>
<div class="paragraph">
<p>4.resect</p>
</div>
<div class="paragraph">
<p>就像像你调用mkdir一样，会返回结果，所以他在启动的时候，执行完了会把比如说那个东西叫result(结果)，</p>
</div>
<div class="paragraph">
<p>5.Agentd&#8212;&#8203;JSON A&#8212;&#8203;JSON B&#8212;&#8203;Server</p>
</div>
<div class="paragraph">
<p>然后会把这个结果通过HTTP/JSON上报给DAMS，比如说他的端口是8080，那报给他过后，这个地方是JSON A，那上报给Agentd后应该去做一些整理，那么他把那个JSON A转成JSON B发给Server。</p>
</div>
<hr>
<div class="paragraph">
<p>这个时候，因为我们有几个模块，这地方有三个例子，那么这个动作会发生几次？三次，等于说他就是个循环，那第三点就很重要，如果有几个模块的就应该起几个线层，每一个线程去运行每个模块的命令，比如说第一个运行的是CPU和top命令，第二个可以用free命令看内存，然后再用某个命令去IO，那么看完了都有返回结果，那返回结果经过程序，因为程序是给他自己处理的。</p>
</div>
<div class="paragraph">
<p>可以自己通过命令把比如说CPU的数据，就只要那个90%筛出来，我们先忽略掉一部分细节啊，逻辑的话就是，在你开机的时候，首先被拉起来的是你的agent这个主程序，主程序启动的时候，它就扫描某一个模块文件夹下面所有的模块配置文件，等于说模块不是写死的，不是代码里面写死的是什么？，所有的都是这么做的，比如说你用PHP加模块，也是这样加的。那这样的话就相当于是说比如说有三个模块，那这个第二步就应该起三个线程，每一个线程和线之间是没有关系的，但是线程和主程序之间是通过HTTP通信的，这就解决了资源的问题，编程的难度陡然降低，为什么？无非就是请求个网址，这个网址是自己的还是别人的，无所谓，启动主程序的时候启动个8080端口，然后程序报给8080过后8080再去请求他的网址，把最终结果丢给Server，但是如果难度太高，就导致了没有人愿意用，维护成本太高了，所以这个Agentd有个职责，他叫代理，叫Broker，你大家看英文的框架的时候，你经常遇到这个东西。比如消息队列里头，经常你看到，翻译成砖块，他其实和persis代理还是有本质的区别的吧，代理一般是指很复杂的东西。比如说你说Nginx就是个反带，他是一个完整的代理，但是这个地方，你不能把它叫代理，为什么？他既不是反向代理，也不是正向代理，他就是简单的把东西封装一下，朝外面丢，那为什么要这个东西，而不直接把数据丢给Server？因为，现在有几个连接呀？有三个连接，那都连到Server上去，那我一台机器上面就也不止三个模块吧，那么通过这种汇总的行为，来降低服务器的连接数，让总体性能更好一些。</p>
</div>
<div class="paragraph">
<p>因为你最终从DAMS出来的时候，是模块自己的信息。但Agentd，应该告诉他是哪台机器的，是那个IP地址的。</p>
</div>
<div class="paragraph">
<p>现在问题来了，如果你打的标准输出或者文件日志里的，请问你打的时候，你怎么能够及时的通知Agentd去处理？因为你如果用标准输出打到屏幕上或者日上都差不多的，文件IO你异步处理是有问题的，为什么?因为你写了过后，那服务器咋知道有新东西了，所以这样的话就必须两边同时打开，就相当于说Agentd要打开那个日志文件，就只读嘛。DAMS是又写又读嘛，然后两边就一直都有个关系了，那这就意味着两边状态要同步，如果我不小心把文件删了，Agent就要重新打开，这样你还要管理，很麻烦，所以你设计的时候考虑的问题就是用起来方便。</p>
</div>
</div>
<div class="sect2">
<h3 id="_扩充">4.6. 扩充</h3>
<div class="paragraph">
<p>然后现在开始做扩充，刚刚有些细节省掉了啊，从8080端口开始，那这个地方看起来是要启动Web server，webserver启动了过后，那么就应该运行在他的一个线程，当然你也可以运行在进程里头，但是我们是假设哈。不过进程太多也可以，比如说他一个子进程专门用来处理Web请求，处理完了过后顺手丢出去。假设有一个主进程和一个Web的进程，然后在启动的时候，拿个进程专门取Web端口，另外一个继续做下面的事情，因为下面的才是主流程，Web端口是有消息发上来才会被触发，叫事件驱动。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>事件驱动：等着别人来请求我的时候，我才返给你，就比如说支付宝的服务器也没莫名其妙给我发余额呀，那么就证明他也是被动的，为什么？要有存款的行为才有余额的变动呀，如果某一天突然打钱进来了，一定是幻觉，就像某个银行账号，突然存款一个亿，你敢用吗？你不敢动啊，因为你如果今天用了1000万，第二天就被抓了贪污国家公款罪，为什么？钱也不是你打你就开始用了。</pre>
</div>
</div>
<div class="paragraph">
<p>所以整体来说，首先你要起个子进程，放在那，然后你的主进程就一直接往下走，就开始去扫描配置目录里面的那个模块配置，模块不止一个，所以你应该用一个命令去扫描那个目录下所有匹配规则的名字，然后用列表列出来，列出来了过后你就应该有个清单，然后挨个读，先读它的名字，读了名字过后，应该有个class或者列表把名字保存，然后就是对象的执行执行路径，还有一个是执行的类型，这三个凑成的一个子对象。然后再把对象放在对象列表里面就存下来了嘛。我们之前讲的程序等于算法加数据结构。这地方就在讲数据结构，还没涉及到算法的地方，为什么？那时候他还在加载，就像从MySQL读东西读完了，准备好了，必要的条件数据都有了，这样算法才能运行起来，为什么？算法是需要输入参数的，比如说人工智能的推荐算法，推荐算法是不是有输入嘛，再比如说用户说100块钱到200块钱以内，男性用品，然后这个时候算法有输入，算法才能运行，所以现在还在为算法准备东西 ，最后得到一个对象列表，过后你是不是该写个for循环，挨个把列表里面的对象读出来，怎么读啊？object取出来，object.name放到第3步的CPU那个位置上，至于是这样执行还是在函数里面直接调函数，无所谓，所以应该是这样的，简单一点，你应该调object.exec直接启动，那如果有三个模块的话就写三个，而且启动的时候你要先把他传给一个线程，让他在线程里面去跑，不管那个东西是执行一次还是一直执行不退出来，都用一样的逻辑处理，为什么不用进程？哇，你机器20个接口。你的20个进程，那就太拥堵了，因为进程的消耗很大，进程是要分配内存的，分配各种各样继承出来的内存，就很麻烦，而线程是操作系统调度的最小单位，在面试的时候，很可能有些人会问这个问题，但是你不用担心，一般人不会问你，为什么？因为他也不懂，所以进程是操作系统分配资源的最小单位，内存，cpu，怎么打开文件就是这种东西。</p>
</div>
<div class="paragraph">
<p>线程是依附于进程的，但是线程又可以跑东西，所以线程是跑东西的最小单位，没毛病。所以你用线程跑就是为了节约资源，就是为了省内存，把内存省掉的一点，能抠一点是一点，就这么抠出来的，不像那个微软，你的电脑一共才8G的内存，结果他一次性给你用完了6G，剩下两个g自由发挥,以前Windows Xp 512内存用的好好的，突然来个Vista要求1.5G的内存，装上开个机啥都不干他就自己卡死了，微软和Intel总会想方设法用各种Flash东西给你塞满，但是作为优秀的开发者来讲，我们不要去干那个事情，所以在设计的时候要考虑各种各样的细节，所以那这个地方肯定是用线程。至于线程，我是单纯用一个命令启动，还是用个模块，都一样的。</p>
</div>
<div class="paragraph">
<p>所以第三点是一个线程，那么他可能调函数或者命令，然后把线程跑起来，你现在不要关心他。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

这个线程运行的是top命令，那么运行的过后，他会马上返东西出来，那这个县城里头，那么肯定不仅是一个简单的线程，那线程里面应该包装了这模块里面的一些行为。刚刚波波说的嘛，有SaaS服务，但你不可能让用户去写，比如说CPU模块到DAMS是有行为的，打个比方，整个主程序执行完了的结果是一个屏幕上的整个东西，你要把这个东西塞在JSON里面然后丢给服务器吗？所以你在写cpu这个模块的时候，里面应该预备一些函数，把那个数据得到过后，用预备的一些函数，把它清理一遍，然后往Agent丢，但朝这丢的时候一定是标准接口，就是你清理完后的东西，通过标准的这个接口又出去，这个接口是我们自己预备的。用户只需要解决那个选数据的问题，所以这个程序不是一个简单的命令，第二步里应该是用户自己写的。
这个程序里头，他要负责处理获取数据的数据的清洗，清洗完了过后，把清洗完的东西打到标准输出上面，打到屏幕上面，然后线程把屏幕的东西捕获了，再通过标准的HTTP接口封装成JSON，接着丢出去，所以用户只需要处理配置文件的逻辑，但是有个前提，你打出来的标准输出或者你的这种格式，必须统一，为什么？因为我是统一的，所以我去拿东西的时候，一定也是统一的，所以这个地方是是统一的接口。用户的程序里面就应该去处理这些逻辑，这个地方虽然例子是一个拓扑，但是你要自己写一个Shell把拓扑给处理掉。</pre>
</div>
</div>
<div class="paragraph">
<p>所以等一会我们就把这个黑板上擦掉，重新去写个例子去完善它，这个里面有统一的逻辑。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方

比如说写个插件，那个ZSR我里面写用C写了个插件系统，就是插件或者是模块，你要注册，模块你要注册，你还要注销，就相当加载和卸载吗，除这个以外，模块输出至少有三个接口，首先你应该又有加载，慢慢加载完了过后你应该有获取，这个获取里面应该包括命令拓扑的结果，拿到结果过后再做一些简单的筛选，所以说数据的获取1就是输出的东西，应该是处理完的，然后处理完后，应该还有一个output的东西，为什么？他应该输出到屏幕上，应该告诉对高统一的格式告诉DAMS我是哪个模块，要把名称、采集时间、命令输出结果放上去，然后把这几个结果转成JSON，往上一报ok，所以DASM就是刚刚说的统一格式，Agentd就是他封装完的HTTP  JSON包，然后丢出去，这样的话，对于用户来说，如果有想开发自己的扩展的话，你只需要加一个配置文件，然后在配置文件中的exec下写一句Shell或者一个简单的程序，只要那个格式是我们统一的格式，我们就能处理。那这样的话基本常用的语言都可以实现，扩散性就ok了。然后性能的问题，客户自己写的程序的性能问题又和我们没有关系。</pre>
</div>
</div>
<div class="paragraph">
<p>整个设计里没有进程和线程的关系，他们只有一个启动就完了，那这样的话，就形成一个完整的闭环，而不用关心各种细节的问题，关系太多很容易把这个开发难度给提升提升，提升完就不友好了，所以应该把更多的精力放在优秀的设计上面。而不是放在技术的细节上，为什么？因为技术是挣不了钱的，比如说知乎上经常有个问题：大公司怎么保护他代码的。
是这样的，微软美国公司，他把他的Windows 10的原代码给了中国政府。那中国政府搞了个Windows 10出来吗？为什么？他要让中国政府相信他，Windows 10里面没有放木马，让政府办公可以信任他？所以这个是原代码，它不值钱，为什么？政府买他单给他单子，单子才值钱，原代码啥都不是，比如说华为交换机的原代码，欧盟有，英国有，美国也有，因为华为任正非早就给他们，让他们随便审核，找出问题算我输，然后美国说，不是这个样子的，我不是想看你代码，我是想加点进去，任正非又说不敢干，那不然美国怎么监控全世界嘛，这个话不能公开场合说白了，说白了就没意思了，只要智商正常都能看懂，所以整个主程序的设计逻辑，你要解决是什么？要解决是优秀的设计，优秀的框架，不要在意太多技术细节，因为技术细节处处都是陷阱，你想嘛？你到处都用Socket或者C，我没说这个东西不能写，但是他会让别人望而却步，就没有人愿意参与你的项目了，所以这个时候你要考虑的是什么，通过这种扩展性和优秀的设计解决生态问题。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>打个比方
今天你你能干，你拿到1万的薪水做这个事情，那明天比如说有个5000的小伙子，他敢不敢动？他不敢动，为什么？因为难度摆在那，但是他用Python是这样的，我一般让别人写Python，我才不提前一个星期了，你今天下午用拍上把这个写一下。有啥难度吗？没有难度，因为你只要是从事这个行业的，你多多少少都会写一点，除非你是文职，你凡是技术岗的都没有问题，甚至我之前讲过，上家公司的一个人，我让他用Python，他死活不用，后面我强行让他们用，三天给我写出了个花里胡哨的Python还写成了Java，反正我是没看懂，就真的写了三天，三天过后，他的代码我已经看不懂了，为什么？各种封装？Java有注解Python也有了，然后他那个函数，他说：打日志的时候不方便，用注解来打日志，然后把整个代码传给那个注解。注解里头123封装，反正一出问题一调试，结果到处乱跳，也不知道跳哪去了，用Python的目的是因为它简单快吗，结果里写成了Java，那为什么你直接用Java呢？</pre>
</div>
</div>
<div class="paragraph">
<p>顺着刚才讲，那么你写for循环，你循环完了过后起n个线程，线程把数据采集完了，过后，输出一个标准的123名称、采集时间、输出结果，然后把它弄在一起丢出去，就从模块丢到DASM，DASM是认识的，如果不认识那么就是你的格式不对，然后用HTTP封装一下包成JSON，往外面丢就ok了，至少数据传上去了。</p>
</div>
<div class="paragraph">
<p>现在还有个很复杂的问题：就是配置文件中的One Shot，这个命令现在显示的是执行一次，但是有的东西你是不能间断的，我打个比方，监听HTTP的包。总不能间隔采集，只要断一秒钟，下次来的时候，前面数据都丢掉了，所以像这种监听HTTP的或采集cpu的这两个东西很特别。因为采cpu，一旦你停下来你再采集的时候，每次采的第一次，他永远都是0。因为CPU的使用率是靠占用时间来算的，所以时间有个起点，那这样的话就面临的就是像cpu、HTT这种的采集程序，用HTTP举例，你不能停掉，得一直运行的。所以在配置文件里就有一个问题，你的输出会源源不断的往外面丢了，如果用刚才把数据都合并在一起的那种方式，是不是有问题？消息发不出来，因为他永远堵在那儿了，源源不断的就变成了那个阻塞，就像堵车一样，你前面的没有过红绿灯，后面的全部排在那排着队的。就导致了越发越多，越压越多，后面那个内存就爆炸了，所以这个地方你要考虑个问题：像HTTP那种，刚刚说模块和DAMS之间用打在屏幕上的方式，但屏幕是不能异步的，就算能异步，你也是用函数来实现的，但这样难度就太大了，所以真正在去做设计的时候。真正在去做设计的时候，各个模块和DAMS是一个整块，比如说cpu是cpu的、内存是内存的、IO是IO的。所以这这两个不是单独的两个模块，他们是一体的，是DAMS去调的，那么他要去调用那些东西该怎么掉？所以他应该有个自己的策略，比如说他发现这个地方如果是OneShot的，他就只调用一次，有东西过后，他就把那个程序stop了，当然你可以在配置文件里加个间隔多少秒再调用，那这样就比如监控内存，每一分钟采集一次，这样的话，你有几种实现方式？</p>
</div>
<div class="paragraph">
<p>第一种：到1分钟的时候，启动一下，采集完了，STOP。</p>
</div>
<div class="paragraph">
<p>第二种：启动过后永远不退出。</p>
</div>
<div class="paragraph">
<p>但是第二种就有个问题了，你等那一分钟，你要让用户自己去写空白，刚刚才推了东西，然后应该等59秒，空白空白空白空白空白。所以用户的程序应该不考虑这个问题。那么调度的事情啊，应该让DAMS来做，采数据，用户说了算。</p>
</div>
<div class="paragraph">
<p>那么刚刚说这个内存就应该是这样的：</p>
</div>
<div class="paragraph">
<p>启动第一次，运行一下，程序就会有输出，当你拿到想要的过后，计数器设为1，这个时候就退出，退出完了过后，他那个线程肯定是不会退出的，他就Sleep 60秒，那线程会一直放在那儿，所以这个地方，他相当于说Sleep 60秒，60秒后下次再来，但是线程是不会退出去的，因为什么？因为他OneShot下面还有一个配置，就是间隔时间60秒嘛，这是一种方式，还有一种方式，就像HTTP那种，不能间隔，你必须一直采，那一直采就一直朝外面报，那现在怎么解决输出的问题啊？当然你输出到DAMS那肯定是JSON，当然有点抽象哈，不懂我们就解释到懂为止。</p>
</div>
</div>
<div class="sect2">
<h3 id="_新的问题">4.7. 新的问题</h3>
<div class="paragraph">
<p>那么在配置文件中Type里HTTP这种东西怎么去采？采了过后，你又不能阻塞，因为只有一个线程，说白了你采完了报给谁？然后怎么怎么样，首先才肯定是用户自己写的程序采集，那要怎么解决gdp的问题、采集的问题。
首先分析一下采集HTTP的时候你要怎么用？</p>
</div>
<div class="paragraph">
<p>那个东西一定一直卡在那儿的，因为他不退出来，所以采集到的时候就一直卡在那，当然我们不讨论用户程序里头怎么写的，我不关心他。我们就只做什么，这边是用户的，这边是给我们的，我们就只知道他会每秒钟输出一条数据，然后这个数据你要怎么去搜？他每秒钟打一条，比如说你，你们两个，都不能断开，就等于说是这样的。你接收到一条数据，数据你收到过后马上处理，处理完了过后就应该到后面的逻辑，这个时候你处理完了，你应该又处于一个什么？他们之间数据给出来到这个地方，要怎么去处理？我不限制方式，头脑风暴，HTTP它每一秒钟那个程序每一秒钟就像will shock一样，每一秒钟朝指定的地方丢一条数据，我们不讨论之前的，你就相当于说你那个软件上头一直在新增东西对吧？新增一行一行一行，你说你每次处理的是新增的那一行，老的你肯定是不管的，那新的那一行怎么处理？</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_HTTP_chapter">5. HTTP协议</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_板书_5">5.1. 板书</h3>
<div class="imageblock">
<div class="content">
<img src="images/板书1.jpg" alt="板书1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/板书2.jpg" alt="板书2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_什么是http">5.2. 什么是HTTP？</h3>
<div class="paragraph">
<p>HTTP：超文本传输协议</p>
</div>
<div class="paragraph">
<p>H：Hyper（超）</p>
</div>
<div class="paragraph">
<p>T：Text（文本）</p>
</div>
<div class="paragraph">
<p>T：Transfer （传输）</p>
</div>
<div class="paragraph">
<p>P：Protocol（协议）</p>
</div>
<div class="paragraph">
<p>之所以讲HTTP是因为所有人天天都会和他打交道，浏览器，app。甚至你的支付宝，他很多地方都用到这个东西。当然你刷抖音也很有可能为什么他的视频分段嘛， 像哔哩哔哩我之前上课的时候直播，我就把哔哩哔哩爬出来了，他出来发现他的URL都是什么HTTP打头的 ，而且他可能一个十分钟的视频，他分成了四段。</p>
</div>
<div class="sect3">
<h4 id="_协议_2">5.2.1. 协议</h4>
<div class="paragraph">
<p>网络协议的简称，网络协议是通信计算机双方必须共同遵从的一组约定。如怎么样建立连接、怎么样互相识别等。只有遵守这个约定，计算机之间才能相互通信交流。</p>
</div>
</div>
<div class="sect3">
<h4 id="_文本">5.2.2. 文本</h4>
<div class="paragraph">
<p>很多文字组成在一起的就叫文本。</p>
</div>
<div class="paragraph">
<p>写一个超过文本的文本：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/文本.png" alt="文本">
</div>
</div>
<div class="paragraph">
<p>&lt;h1&gt;是经过渲染之后的文本</p>
</div>
<div class="paragraph">
<p>&lt;p&gt;就是文本哦</p>
</div>
<div class="paragraph">
<p>这个地方你可以看出区别，这个两个大小一样，他其实就是把一个文字打印到了屏幕和浏览器上面，没有做任何的改变，那这个地方我加了个h1过后就表示是标题1,就是你的word里头那个标题12345还有这个字体就越来越大，1最大嘛，2小3更小，然后正文是最小的。</p>
</div>
<div class="paragraph">
<p>所以这个地方指的超文本是靠这种东西这种东西来渲染的，用英文来讲的话叫tag,叫标记，英文来讲叫tag，那么tag翻译成中文就是标记，也经常有有人把这个东西叫什么标记语言，所以我们经常会把这个这种语法称作HTML ，HTML你就理解为这个协议里面的文字，HTTP是存在的协议嘛，你协议里面要有一种表现协议数据的形式。0101是计算机的表示，然后比如说我说话，说普通话，说汉字是我的表示，是我们两个能够理解普通话的，这个字典里面的表示 ，汉字是表示的 ，比如说你是英国人，你说英语，然后你写英文的文字，这个时候你的表现形式就是那个英文，那这个时候你既然说的是HTTP语言，那HTTP语言就应该有一个自己的文字和语言，那这样的话就是HTML。</p>
</div>
<div class="paragraph">
<p>HTTP=语言</p>
</div>
<div class="paragraph">
<p>HTML=HTTP的文字</p>
</div>
<div class="paragraph">
<p>H：Hyper（超）</p>
</div>
<div class="paragraph">
<p>T：Text （文本）</p>
</div>
<div class="paragraph">
<p>M：Markup （标记）</p>
</div>
<div class="paragraph">
<p>L：Language（语言）</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_为什么用http">5.3. 为什么用HTTP？</h3>
<div class="ulist">
<ul>
<li>
<p>简单好用：HTTP报文能够被人读懂，还允许简单测试，降低了门槛，对新人很友好。</p>
</li>
<li>
<p>可扩展的：在 HTTP/1.0 中出现的 HTTP headers 让协议扩展变得非常容易。只要服务端和客户端就新 headers 达成语义一致，新功能就可以被轻松加入进来。</p>
</li>
<li>
<p>无状态，有会话的：HTTP是无状态的：在同一个连接中，两个执行成功的请求之间是没有关系的。这就带来了一个问题，用户没有办法在同一个网站中进行连续的交互，比如在一个电商网站里，用户把某个商品加入到购物车，切换一个页面后再次添加了商品，这两次添加商品的请求之间没有关联，浏览器无法知道用户最终选择了哪些商品。而使用HTTP的头部扩展，HTTP Cookies就可以解决这个问题。把Cookies添加到头部中，创建一个会话让每次请求都能共享相同的上下文信息，达成相同的状态。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>注意，HTTP本质是无状态的，使用Cookies可以创建有状态的会话。</p>
</div>
<div class="paragraph">
<p>使用场景：app、网页、物联网</p>
</div>
<div class="paragraph">
<p>例：</p>
</div>
<div class="paragraph">
<p>摩拜单车要将他的位置报上服务器，就是用没有界面的HTTP；电梯里面的广告机在服务器上下发广告的时候也用的HTTP；投一块钱或者扫码拍照的，拍完数据传输也是HTTP。</p>
</div>
</div>
<div class="sect2">
<h3 id="_怎么使用http">5.4. 怎么使用HTTP？</h3>
<div class="paragraph">
<p>例：</p>
</div>
<div class="paragraph">
<p>你用一个裸的python，你怎么使用http协议传东西啊？你最开始应该是准备一个什么？你要写个库，那个库能够正常的封包解包http协议。有了这个作为基础，你才能在封装更上层的class。</p>
</div>
<div class="paragraph">
<p>java本身它和http是有关系的，java语言他自带了一套去访问网页的一套库啊或者一些基础功能，或者叫内置功能啊，它里面有servlet，这个东西是干了个啥？那么这个地方servlet，他是做了一个封包解包，他在构造请求和解析请求，解析什么请求，现在看要是手写一个报文:</p>
</div>
<div class="paragraph">
<p>请求报文：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/请求报文.png" alt="请求报文">
</div>
</div>
<div class="paragraph">
<p>响应报文：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/响应报文.png" alt="响应报文">
</div>
</div>
<div class="paragraph">
<p>这个报文很简单，servlet干了个什么事情啊？servlet他收到数据的时候，收到的是Accept，他判断这个里头那些东西，他把他单独的拎出来，他封装了一堆class，就叫HTTP Request，
HTTP Request它会产生这个对象哈。然后这个时候，因为你是程序员，你要控制他你要回答，你要回答的话，你又需要构造HTTP Response对象，所以我现在我就决定他的对象那个中间的，Body等于body，标题等于title，最后，他就会构造上面一堆，他构造这一堆过后就把它丢给访问者，就相当说你在浏览器里面敲qq.com，浏览器会生成这个报文，什么叫报文呢？就是上面这堆东西就是给也程序看的数据，在网络上流淌的数据可以叫报文，所以这个时候，针对网络请求，我们一般都会说叫报文，上面这两个东西都叫报文，第一个叫请求报文，第二个个叫响应报文，所以请求报文是什么？是浏览器帮你构造的，那这个地方是浏览器帮你构造的，他发给了java，java在调他的servlet，servlet收到这个报文过后，把它转换成request这个对象，小写就是对象的，那么这个上面是java帮你转的，然后这个地方是程序员转的。程序员自己收到这个东西过后他要做什么处理哈？我就写到伪代码：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/伪代码.png" alt="伪代码">
</div>
</div>
<div class="paragraph">
<p>我打个比方我有个函数，这个函数的返回值是一个Response的对象，然后函数名字比如说我就叫doGet（），函数名字叫doGet就调用get，意思就是说get的时候调这个函数吗？至于怎么跑到这来的，你就先不要去管他，然后这个地方我写一段代码，HTTP Request这个东西就是servlet处理好的，他已经帮你生成了，就是把那个报文转成了Request对象，然后现在你就调一下，我就假设那边传了参数进来的，比如说这个时候我假设有个参数叫名称，那就是我就假设有个叫getName的方法，有这个方法过后，那么这个时候我就怎么样啊？我就构造一个对象 ，比如说直接reture，我就直接传类，反正最终能够返回这个对象就可以了，HTTP Ｒesponse（name）就是返回值嘛，所以你看到没有这个request的是java帮你生成好的，但是response要你自己调，要你自己初始化，最后你初始化完了过后就会得到响应报文，浏览器就会收到响应报文，最终这个response会回到user这个的地方，就通过http。
通过http七协议最终传给chrome吗？ 然后库中最后中间看那个网页上所以这个地方他怎么发生关系的？哈这个东西叫解码器decoder，当然解码器的话就是decoder，然后这个东西叫encoder，编码器。</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-08-12 16:42:28 +0800
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>